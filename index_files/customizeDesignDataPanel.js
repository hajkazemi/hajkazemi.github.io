define("customizeDesignDataPanel/ui/designDataPanelComponent.rt",["react","lodash","baseUI","baseUILib"],function(e,t,a,n){"use strict";return function(){function s(s,o){var i=a[s.controlType];return e.createElement("div",{key:s.key},function(a,n,s){var o=this.getValueLink(a.key);return e.createElement(s,t.assign({},{value:o.value,valueLink:o,disabled:this.isCategoryDisabled()},this.getRequiredProps(a)))}.apply(this,[s,o,i]),this.isLastControlInCategory(o)?null:e.createElement(n.Divider,{long:!1,key:"divider"}))}return e.createElement("div",{className:"design-data-panel flex-column",style:{height:this.getHeight()}},e.createElement("div",{className:"design-data-panel-body flex-column flex-child"},e.createElement("div",{className:"content-container flex-child",key:"paramEditBox"},e.createElement(a.verticalTabs,{valueLink:this.linkSelectedCategory(),tabClicked:this.categoryChanged,options:this.getCategoriesRadioValues(),closed:this.state.controlsClosed}),this.state.controlsClosed?null:e.createElement("div",{className:"content "+this.getCategoryClassName(),key:"content"},e.createElement(n.CustomScroll,{heightRelativeToParent:"100%"},e.createElement("div",{className:"scrolled-content"},e.createElement("span",{className:"tab-text"},this.getSelectedCategoryTranslatedText()),e.createElement.apply(this,["div",{className:"section"},this.isCategoryTogglable()?e.createElement("div",{key:"categoryToggle"},e.createElement(n.Composites.ToggleSwitch,{},e.createElement(n.ToggleSwitch,{value:this.isCategoryEnabled(),label:this.getCategoryToggleLable(),onChange:this.toggleCategory})),e.createElement(n.Divider,{long:!1,key:"divider"})):null,!this.isCategoryTogglable()||this.isCategoryEnabled()?t.map(this.getSelectedCategoryControls(),function(e,t,a){return s.apply(this,[e,t])}.bind(this)):null])))))))}}),define("customizeDesignDataPanel/lib/controls",["lodash"],function(e){"use strict";function t(e){return Math.round(100*e)/100}function a(e,a){if(0===e||0===a)return e+a;var n=Math.atan2(e,a);return t(e/Math.sin(n))}function n(e){return e.panelExtensions.cssBoxShadow[0].angle}function s(e,t,a){return 0===e&&0===t?a:(270+function(e){return 180*e/Math.PI}(Math.atan2(t,e)))%360}function o(e,a){var n=function(e){return e*Math.PI/180}(360-e);return{offsetX:c(t(Math.sin(n)*a)),offsetY:c(t(Math.cos(n)*a))}}function i(e){return"#"+r(e.red)+r(e.green)+r(e.blue)}function r(e){var t=e.toString(16).toUpperCase();return t.length<2&&(t="0"+t),t}function l(e,t,a){if(/color_/.test(t)){var n=g.colors.get(t);return e[a.join(".")]=t,n}return delete e[a.join(".")],t}function u(t,a,n,s){var o=n.alpha,i=function(e){return{red:parseInt(e.substr(1,2),16),green:parseInt(e.substr(3,2),16),blue:parseInt(e.substr(5,2),16)}}(t(n.color,s));i.alpha=parseFloat(o),e.set(a,s,i)}function c(e){return{unit:"px",value:e}}var g=void 0,d=["top","right","bottom","left"],p=["topLeft","topRight","bottomRight","bottomLeft"],h=Object.freeze({cssBoxShadow:[{controlType:"angle",key:"angle",props:{helpText:null,label:"CustomDesign_Shadow_Angle",shouldTranslate:!0,step:1}},{controlType:"slider",key:"distance",props:{helpText:null,label:"CustomDesign_Shadow_Distance",shouldTranslate:!0,min:0,max:50}},{controlType:"slider",key:"size",props:{helpText:null,label:"CustomDesign_Shadow_Size",shouldTranslate:!0,min:0,max:50}},{controlType:"slider",key:"blur",props:{helpText:null,label:"CustomDesign_Shadow_Blur",shouldTranslate:!0,min:0,max:50}},{controlType:"colorPickerInputWithOpacity",key:"color",props:{helpText:null,label:"CustomDesign_Shadow_Color&Opacity",shouldTranslate:!0,min:0,max:50}}],cssBorderRadius:[{controlType:"cornerRadiusInput",key:"radius",props:{helpText:null,label:"CustomDesign_Corners_CornerRadius"}}],cssBorder:[{controlType:"colorPickerInputWithOpacity",key:"color",props:{helpText:null,label:"CustomDesign_Borders_Color&Opacity"}},{controlType:"slider",key:"width",props:{helpText:null,label:"CustomDesign_Borders_Width",max:15,min:0}}]}),f=Object.freeze({cssBoxShadow:{angle:{getLinkableValue:function(t,a){var o=e.get(t.cssStyle,a[0])[0];return function(){var e=n(t);return s(o.offsetX.value,o.offsetY.value,e)}},linkedValueToData:function(t){return function(n){var s=t.cssStyle.cssBoxShadow[0],i=a(s.offsetX.value,s.offsetY.value),r=e.cloneDeep(t);return e.assign(r.cssStyle.cssBoxShadow[0],o(n,i)),e.assign(r.panelExtensions.cssBoxShadow[0],{angle:n}),r}}},distance:{getLinkableValue:function(t,n){var s=e.get(t.cssStyle,n[0])[0];return function(){return a(s.offsetX.value,s.offsetY.value)}},linkedValueToData:function(t){return function(a){var i=t.cssStyle.cssBoxShadow[0],r=e.cloneDeep(t),l=n(t),u=s(i.offsetX.value,i.offsetY.value,l);return e.assign(r.cssStyle.cssBoxShadow[0],o(u,a)),e.assign(r.panelExtensions.cssBoxShadow[0],{angle:u}),r}}},size:{getLinkableValue:function(t,a){var n=e.get(t.cssStyle,a[0])[0];return function(){return n.spreadRadius.value}},linkedValueToData:function(t){return function(a){var n=e.cloneDeep(t);return n.cssStyle.cssBoxShadow[0].spreadRadius=c(a),n}}},blur:{getLinkableValue:function(t,a){var n=e.get(t.cssStyle,a[0])[0];return function(){return n.blurRadius.value}},linkedValueToData:function(t){return function(a){var n=e.cloneDeep(t);return n.cssStyle.cssBoxShadow[0].blurRadius=c(a),n}}},color:{getLinkableValue:function(t,a){var n=e.get(t.cssStyle,a[0])[0][a[1]];return function(){return{color:i(n),alpha:n.alpha.toFixed(4)}}},linkedValueToData:function(t,a){return function(n){var s=e.cloneDeep(t),o=e.clone(a);return o.splice(1,0,"0"),u(e.bind(l,{},s.themeMappings),s.cssStyle,n,o),s}}}},cssBorderRadius:{radius:{getLinkableValue:function(t,a){var n=e.get(t.cssStyle,a[0]);return function(){return e.reduce(p,function(e,t,a){return e+n[t].value+(a!==p.length-1?" ":"")},"")}},linkedValueToData:function(t,a){return function(n){var s=e.cloneDeep(t),o=n.split(" ");if(1===o.length){var i=o[0];o=[i,i,i,i]}var r=s.cssStyle[a[0]]={};return e.forEach(p,function(e,t){r[e]=c(parseInt(o[t],10))}),s}}}},cssBorder:{color:{getLinkableValue:function(t,a){var n=e.get(t.cssStyle,a);return function(){return{color:i(n.top),alpha:n.top.alpha.toFixed(4)}}},linkedValueToData:function(t,a){return function(n){var s=e.cloneDeep(t),o=e.bind(l,{},s.themeMappings);return e.forEach(d,function(e){u(o,s.cssStyle,n,a.concat(e))}),s}}},width:{getLinkableValue:function(t,a){var n=e.get(t.cssStyle,a);return function(){return n.top.value}},linkedValueToData:function(t,a){return function(n){var s=e.cloneDeep(t);return e.forEach(d,function(t){e.set(s.cssStyle,a.concat(t),c(n))}),s}}}}});return{setThemeAPI:function(e){g=e},categoryControlsMap:h,getDataManipulators:function(t,a,n){var s=f[a][n];return e.reduce(s,function(e,s,o){return e[o]=s(t,[a,n]),e},{})}}}),define("customizeDesignDataPanel/lib/consts",[],function(){"use strict";return{editableTypes:["cssBoxShadow","cssBorderRadius","cssBorder","themeMappings"],togglableCategories:["cssBoxShadow"],categoryToggleLabels:{cssBoxShadow:"CustomDesign_Shadow_EnableToggle"},categoryDefaults:Object.freeze({cssBoxShadow:[{inset:!1,offsetX:{unit:"px",value:0},offsetY:{unit:"px",value:1},blurRadius:{unit:"px",value:4},spreadRadius:{unit:"px",value:0},color:{red:0,green:0,blue:0,alpha:1}}],cssBorderRadius:{topLeft:{unit:"px",value:0},topRight:{unit:"px",value:0},bottomRight:{unit:"px",value:0},bottomLeft:{unit:"px",value:0}},cssBorder:{width:{top:{unit:"px",value:0},right:{unit:"px",value:0},bottom:{unit:"px",value:0},left:{unit:"px",value:0}},style:{top:"solid",left:"solid",right:"solid",bottom:"solid"},color:{top:{red:0,green:0,blue:0,alpha:1},right:{red:0,green:0,blue:0,alpha:1},bottom:{red:0,green:0,blue:0,alpha:1},left:{red:0,green:0,blue:0,alpha:1}}}}),designDataExtensionDefualts:Object.freeze({cssBoxShadow:[{angle:0}]}),HEIGHT_SMALL:"380px",HEIGHT_BIG:"453px",MIN_VIEW_PORT_HEIGHT:500}}),define("customizeDesignDataPanel/ui/designDataPanelComponent",["reactDOM","lodash","jquery","create-react-class","customizeDesignDataPanel/ui/designDataPanelComponent.rt","core","panelUtils","customizeDesignDataPanel/lib/controls","customizeDesignDataPanel/lib/consts","util"],function(e,t,a,n,s,o,i,r,l,u){"use strict";var c=[{value:"cssBorder",symbolName:"borderDesign",text:u.translate("CustomDesign_TabLabel_Borders")},{value:"cssBorderRadius",symbolName:"cornersDesign",text:u.translate("CustomDesign_TabLabel_Corners")},{value:"cssBoxShadow",symbolName:"shadowDesign",text:u.translate("CustomDesign_TabLabel_Shadow")}],g=l.designDataExtensionDefualts;return n({displayName:"customize-design-data-panel",mixins:[o.mixins.editorAPIMixin,i.linkColorPickerMixin],getInitialState:function(){r.setThemeAPI(this.getEditorAPI().theme);return{editableDesignData:this.getEditableData(),selectedCategory:this.props.selectedCategory,controlsClosed:!this.props.selectedCategory}},componentWillMount:function(){var e=this.getEditorAPI().documentServices.theme.events.onChange.addListener(function(){this.updateEditableDataState()}.bind(this));this.setState({themeChangeListenerId:e}),this.initCategoriesTogglableState()},componentWillReceiveProps:function(){this.updateDesignOnModeChange()},componentWillUnmount:function(){this.getEditorAPI().theme.events.onChange.removeListener(this.state.themeChangeListenerId)},updateDesignOnModeChange:function(){var e=this.props.selectedComponent[0],a=this.getEditorAPI().components.modes.getComponentActiveModeIds(e);t.isEqual(this.state.compModes,a)||(this.setState({compModes:a}),this.initCategoriesTogglableState(),this.updateEditableDataState())},updateEditableDataState:function(){this.setState({editableDesignData:this.getEditableData()})},initCategoriesTogglableState:function(){var e=this.getDesignData(),a={disabledCategoriesData:{cssStyle:{},panelExtensions:g},categoryEnableStates:{}};t.forEach(l.togglableCategories,function(n){var s=!t.isNil(e.cssStyle[n]);a.categoryEnableStates[n]=s,s||(a.disabledCategoriesData.cssStyle[n]=t.cloneDeep(l.categoryDefaults[n]))}),this.setState(a)},getEditableData:function(){var e=this.getDesignData(),t={};return t.cssStyle=this.getComponentCssStyle(),t.themeMappings=e.themeMappings,t.panelExtensions=this.getDesignDataExtensions(),t},getComponentCssStyle:function(){var e=this.getDesignData(),a={},n=this.isCategoryTogglable,s=t.difference(l.editableTypes,this.props.disabledCategories);return t.forEach(s,function(t){var s=e.cssStyle[t];n(t)||s?a[t]=s:a[t]=l.categoryDefaults[t]}),a},getDesignDataExtensions:function(){return this.state&&this.state.designDataExtensions?this.state.designDataExtensions:g},getDataManipulators:function(e){var t=this.state.selectedCategory,a=void 0;return a=this.isCategoryDisabled()?this.state.disabledCategoriesData:this.state.editableDesignData,r.getDataManipulators(a,t,e)},updateComponentDesignData:function(e){this.getEditorAPI().components.design.update(this.props.selectedComponent,e)},updateDesignDataExtension:function(e){this.setState({designDataExtensions:e})},getValueLink:function(e){var t=this.getDataManipulators(e);return{value:t.getLinkableValue(),requestChange:function(e){var a=t.linkedValueToData(e);this.setState({editableDesignData:a}),this.updateComponentDesignData(a),this.updateDesignDataExtension(a.panelExtensions)}.bind(this)}},getRequiredProps:function(e){var a=t.clone(e.props);return"colorPickerInputWithOpacity"===e.controlType&&t.assign(a,{openColorPicker:this.openColorPicker,colorResolver:this.resolveColor,isSmallStepper:!0}),a},linkSelectedCategory:function(){return{value:this.state.selectedCategory,requestChange:function(e){this.state.selectedCategory!==e&&this.setState({selectedCategory:e,controlsClosed:!1})}.bind(this)}},getCategoriesRadioValues:function(){var e=t.keys(this.state.editableDesignData.cssStyle);return t.reduce(c,function(a,n){return t.includes(e,n.value)&&a.push(n),a},[])},getHeight:function(){return o.utils.stageUtils.getViewPort().height<l.MIN_VIEW_PORT_HEIGHT?l.HEIGHT_SMALL:l.HEIGHT_BIG},getDesignData:function(){return this.getEditorAPI().components.design.get(this.props.selectedComponent)},categoryChanged:function(){this.scrollContainerToTop()},scrollContainerToTop:function(){var t=e.findDOMNode(this);a(t).find(".inner-container").scrollTop(0)},getCategoryClassName:function(){return"category-"+this.state.selectedCategory},getSelectedCategoryTranslatedText:function(){var e=this.state.selectedCategory;return e?t.find(c,{value:e}).text:""},getSelectedCategoryControls:function(){return r.categoryControlsMap[this.state.selectedCategory]},isLastControlInCategory:function(e){return e===this.getSelectedCategoryControls().length-1},isCategoryDisabled:function(){return this.isCategoryTogglable()&&!this.isCategoryEnabled()},isCategoryTogglable:function(e){return e=e||this.state.selectedCategory,t.includes(l.togglableCategories,e)},getCategoryToggleLable:function(){return l.categoryToggleLabels[this.state.selectedCategory]},isCategoryEnabled:function(){return this.state.categoryEnableStates[this.state.selectedCategory]},toggleCategory:function(){var e={},a=this.state.selectedCategory,n=!this.isCategoryEnabled(),s=t.cloneDeep(this.state.editableDesignData);if(e.categoryEnableStates=t.cloneDeep(this.state.categoryEnableStates),n){var o=this.state.disabledCategoriesData.cssStyle[a];s.cssStyle[a]=o}else e.disabledCategoriesData=t.cloneDeep(this.state.disabledCategoriesData),e.disabledCategoriesData.cssStyle[a]=s.cssStyle[a],s.cssStyle[a]=null;e.editableDesignData=s,this.updateComponentDesignData(s),e.categoryEnableStates[this.state.selectedCategory]=n,this.setState(e)},onLoaded:t.noop,render:s})}),define("customizeDesignDataPanel/ui/designDataPanelStandalone.rt",["react","lodash","compPanels","customizeDesignDataPanel/ui/designDataPanelComponent"],function(e,t,a,n){"use strict";return function(){return e.createElement(a.compPanelFrame,function(e,a){var n=t.assign({},e,a);return e.hasOwnProperty("style")&&(n.style=t.defaults(n.style,e.style)),e.hasOwnProperty("className")&&a.hasOwnProperty("className")&&(n.className=a.className+" "+e.className),n}({className:"design-data-panel-frame",id:"customizeDesignPanel",title:"title",helpId:!0},this.getPanelFrameProps()),e.createElement(n,this.props))}}),define("customizeDesignDataPanel/ui/designDataPanelStandalone",["core","create-react-class","lodash","util","designPanelUtils","helpIds","customizeDesignDataPanel/ui/designDataPanelStandalone.rt"],function(e,t,a,n,s,o,i){"use strict";return t({displayName:"designDataPanelStandalone",mixins:[e.mixins.editorAPIMixin,s.mixins.panelPositionMixin],getPanelFrameProps:function(){var e=n.panelUtils.getFrameProps(this.props);return e.helpId=o.UTILS.getCustomizeDesignHelpId(this.props.compType),e.overrideTitle&&(e.title=e.overrideTitle,e=a.omit(e,["overrideTitle"])),e},render:i})}),define("customizeDesignDataPanel",["customizeDesignDataPanel/ui/designDataPanelComponent","customizeDesignDataPanel/ui/designDataPanelStandalone"],function(e,t){"use strict";return{panel:e,standalone:t}});
//# sourceMappingURL=customizeDesignDataPanel.min.js.map