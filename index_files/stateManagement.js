function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define("stateManagement/topBar/topBarActionTypes",[],function(){"use strict";return{OVERRIDE_TOP_BAR:"override-top-bar"}}),define("stateManagement/topBar/topBarActions",["stateManagement/topBar/topBarActionTypes"],function(e){"use strict";return{overrideItems:function(t){return{type:e.OVERRIDE_TOP_BAR,overridden:t}}}}),define("stateManagement/leftBar/leftBarActionTypes",[],function(){"use strict";return{COLLAPSE_DESKTOP_MENU:"collapse-desktop-menu",COLLAPSE_MOBILE_MENU:"collapse-mobile-menu",EXPAND_BUTTON:"expand-button",COLLAPSE_BUTTON:"collapse-button",UPDATE_BUTTONS_BOUNDING_RECT:"update-buttons-bounding-rect",SET_NOTIFICATION_COUNT:"set-notification-count",INCREASE_NOTIFICATION_COUNT:"increase-notification-count",DECREASE_NOTIFICATION_COUNT:"decrease-notification-count",REMOVE_PANEL_NOTIFICATIONS:"removePanelNotifications",UPDATE_DESKTOP_SUPERAPP_BUTTON:"updateDesktopSuperappButton",UPDATE_MOBILE_SUPERAPP_BUTTON:"updatemobileSuperappButton",REMOVE_SUPERAPP_BUTTON:"removeSuperAppButton",OVERRIDE_LEFT_BAR:"override-left-bar"}}),define("stateManagement/leftBar/leftBarActions",["stateManagement/leftBar/leftBarActionTypes"],function(e){"use strict";return{collapseDesktopMenu:function(){return{type:e.COLLAPSE_DESKTOP_MENU}},collapseMobileMenu:function(){return{type:e.COLLAPSE_MOBILE_MENU}},expandButton:function(t){return{type:e.EXPAND_BUTTON,panelName:t}},collapseButton:function(t){return{type:e.COLLAPSE_BUTTON,panelName:t}},updateButtonsBoundingRect:function(t){return{type:e.UPDATE_BUTTONS_BOUNDING_RECT,boundingRect:t}},setNotificationsCount:function(t,n){return{type:e.SET_NOTIFICATION_COUNT,panelName:t,count:n}},increaseNotificationsCount:function(t,n){return{type:e.INCREASE_NOTIFICATION_COUNT,panelName:t,count:n}},decreaseNotificationsCount:function(t,n){return{type:e.DECREASE_NOTIFICATION_COUNT,panelName:t,count:n}},removePanelNotifications:function(t){return{type:e.REMOVE_PANEL_NOTIFICATIONS,panelName:t}},updateDesktopSuperAppButton:function(t){return{type:e.UPDATE_DESKTOP_SUPERAPP_BUTTON,buttonParams:t}},updateMobileSuperAppButton:function(t){return{type:e.UPDATE_MOBILE_SUPERAPP_BUTTON,buttonParams:t}},removeSuperAppButton:function(t){return{type:e.REMOVE_SUPERAPP_BUTTON,panelName:t}},overrideItems:function(t){return{type:e.OVERRIDE_LEFT_BAR,overridden:t}}}}),define("stateManagement/addPanel/addPanelActionTypes",[],function(){"use strict";return{OVERRIDE_ADD_PANEL:"override-add-panel"}}),define("stateManagement/addPanel/addPanelActions",["stateManagement/addPanel/addPanelActionTypes"],function(e){"use strict";return{overrideItems:function(t){return{type:e.OVERRIDE_ADD_PANEL,overridden:t}}}}),define("stateManagement/applicationStudio/applicationStudioLogic",["lodash","constants","stateManagement/topBar/topBarActions","stateManagement/leftBar/leftBarActions","stateManagement/addPanel/addPanelActions"],function(e,t,n,a,r){"use strict";var o=t.OVERRIDDEN;return{openApplicationStudio:function(){return function(t,i){var s=i();t(n.overrideItems(function(t){var n=o.TOP_BAR,a=n.BUTTONS,r=n.MENUS,i=n.MENU_ITEMS,s=n.QUICK_NAVIGATION,u=function(n,a){var r=n.KEY;return _defineProperty({},r,e.assign({},t.topBar.overridden.buttons[r],a))},l=e.assign({},t.topBar.overridden.buttons,u(a.PUBLISH,_defineProperty({},a.PUBLISH.LABEL,"Package")),u(a.ZOOM_OUT,_defineProperty({},a.ZOOM_OUT.IS_HIDDEN,!0))),c=function(n,a){var r=n.KEY;return _defineProperty({},r,e.assign({},t.topBar.overridden.menus[r],a))},d=e.assign({},t.topBar.overridden.menus,c(r.SITE,_defineProperty({},r.SITE.LABEL,"Package Menu")),c(r.UPGRADE,_defineProperty({},r.UPGRADE.IS_HIDDEN,!0))),p=function(n){return function(n,a){var r=n.KEY;return _defineProperty({},r,e.assign({},t.topBar.overridden.menuItems[r],a))}({KEY:n.KEY},_defineProperty({},n.IS_HIDDEN,!0))},f=e.assign({},t.topBar.overridden.menuItems,p(i.SITE_GET_FEEDBACK),p(i.SITE_VIEW_PUBLISHED_SITE),p(i.SITE_GET_FOUND_ON_GOOGLE),p(i.SITE_ACCESSIBILITY),p(i.SITE_CONNECT_DOMAIN),p(i.SITE_UPGRADE),p(i.SITE_IMAGE_SHARPENING),p(i.SITE_SITE_MANAGER),p(i.TOOLS_RULERS),p(i.TOOLS_GRID_LINES),p(i.TOOLS_GRID_LINES),p(i.TOOLS_DEVELOPER_TOOLS_SEPARATOR),p(i.TOOLS_DEVELOPER_TOOLS),p(i.TOOLS_PROPERTIES_PANEL),p(i.TOOLS_HIDDEN_ELEMENTS),p(i.HELP_STEP_BY_STEP_VIDEOS_SEPARATOR),p(i.HELP_STEP_BY_STEP_VIDEOS),p(i.HELP_CONNECTING_A_DOMAIN),p(i.HELP_GETTING_FOUND_ONLINE)),g=e.assign({},t.topBar.overridden[s.KEY],_defineProperty({},s.IS_HIDDEN,!0));return e.assign({},t.topBar.overridden,{buttons:l,menus:d,menuItems:f,quickNavigation:g})}(s))),t(a.overrideItems(function(t){var n=o.LEFT_BAR,a=function(n){var a=n.PANEL_NAME,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.leftBar.overridden[a],_defineProperty({},r,!0)))};return e.assign({},t.addPanel.overridden,a(n.ADD_APPS),a(n.BACKGROUND),a(n.MENUS_AND_PAGES),a(n.MOBILE_TOOLS),a(n.HIDDEN_ELEMENTS),a(n.PAGE_LAYOUT_OPTIMIZER),a(n.OLD_BLOG),a(n.BLOG),a(n.STORES),a(n.SHOUTOUT),a(n.BOOKINGS))}(s))),t(r.overrideItems(function(t){var n=o.ADD_PANEL,a=n.CATEGORIES,r=n.SECTIONS,i=function(n){var a=n.ID,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.addPanel.overridden.categories[a],_defineProperty({},r,!0)))},s=e.assign({},t.addPanel.overridden.categories,i(a.GALLERY),i(a.STRIP),i(a.LIGHTBOX),i(a.BLOG_WELCOME),i(a.BLOG),i(a.OLD_BLOG),i(a.STORE),i(a.MEMBERS_WELCOME),i(a.MEMBERS)),u=function(n){var a=n.ID,r=n.IS_HIDDEN;return _defineProperty({},a,e.assign({},t.addPanel.overridden.sections[a],_defineProperty({},r,!0)))},l=e.assign({},t.addPanel.overridden.sections,u(r.TEXT_RELATED_APPS),u(r.IMAGE_RELATED_APPS),u(r.LISTS_AND_GRIDS_LISTS),u(r.VIDEO_WIX_VIDEO),u(r.VIDEO_RELATED_APPS),u(r.SHAPE_RELATED_APPS),u(r.MUSIC_WIX_MUSIC),u(r.MUSIC_RELATED_APPS),u(r.BUTTON_RELATED_APPS),u(r.SOCIAL_RELATED_APPS),u(r.CONTACT_RELATED_APPS),u(r.MORE_ANCHORS),u(r.MORE_RELATED_APPS));return e.assign({},t.addPanel.overridden,{categories:s,sections:l})}(s)))}}}}),define("stateManagement/applicationStudio/applicationStudio",["stateManagement/applicationStudio/applicationStudioLogic"],function(e){"use strict";return{logic:e}}),define("stateManagement/addPanel/addPanelReducer",["lodash","stateManagement/addPanel/addPanelActionTypes","constants"],function(e,t,n){"use strict";var a=t.OVERRIDE_ADD_PANEL;return function(t,r){switch(r.type){case a:return e.assign({},t,{overridden:function(t){var a=r.overridden,o=n.OVERRIDDEN.ADD_PANEL,i=o.CATEGORIES,s=o.SECTIONS,u=function(t,n){return e(t).pick(e.map(n,"ID")).mapValues(function(t,a){return e.pick(t,e.values(e.find(n,["ID",a])))}).value()};return{categories:u(a.categories,i),sections:u(a.sections,s)}}()});default:return t}}}),define("stateManagement/addPanel/addPanelSelectors",[],function(){"use strict";return{getOverriddenCategories:function(e){return e.addPanel.overridden.categories},getOverriddenSections:function(e){return e.addPanel.overridden.sections}}}),define("stateManagement/addPanel/addPanel",["stateManagement/addPanel/addPanelReducer","stateManagement/addPanel/addPanelSelectors","stateManagement/addPanel/addPanelActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/store/combineReducers",["lodash","wixImmutable"],function(e,t){"use strict";return function(n,a){return a?function(n){var a=function(e){return t.Iterable.isIterable(e)}(n)?n:t.Map(n),r=a.map(function(){});return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments[1],o=!1,i=t.map(function(t,r){var i=(a.get(r)||e.identity)(t,n);return i!==t&&(o=!0),i});return o?i:t}}(n):function(t){return function(n,a){var r=!1,o=e.mapValues(n,function(n,o){var i=(t[o]||e.identity)(n,a);return i!==n&&(r=!0),i});return r?o:n}}(n)}}),define("stateManagement/panels/panelsActionTypes",[],function(){"use strict";return{OPEN_PANEL:"openPanel",UPDATE_PANEL:"updatePanel",CLOSE_ALL_PANELS:"closeAllPanels",CLOSE_PANEL_BY_NAME:"closePanelByName",CLOSE_PANEL_BY_PROP:"closePanelByProp",STAGE_MOUSE_DOWN:"STAGE_MOUSE_DOWN",OPEN_HELP_CENTER:"openHelpCenter",CLOSE_HELP_CENTER:"closeHelpCenter"}}),define("stateManagement/panels/panelsReducer",["lodash","stateManagement/panels/panelsActionTypes","constants"],function(e,t,n){"use strict";var a=t.OPEN_PANEL,r=t.UPDATE_PANEL,o=t.CLOSE_ALL_PANELS,i=t.CLOSE_PANEL_BY_NAME,s=t.CLOSE_PANEL_BY_PROP,u=t.STAGE_MOUSE_DOWN,l=[n.PANEL_TYPES.LEFT,n.PANEL_TYPES.PAGES,n.PANEL_TYPES.TPA_SETTINGS];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];switch(n.type){case a:return t.concat(n.panelDescriptor);case r:return e.map(t,function(t){return t.name===n.panelDescriptor.name?e.assign({},t,n.panelDescriptor,{props:e.assign({},t.props,n.panelDescriptor.props)}):t});case i:return e.reject(t,{name:n.panelName});case s:return e.reject(t,function(e){return e.props[n.prop]===n.propValue});case o:return t.length?[]:t;case u:return e.reject(t,function(t){return e.includes(l,t.frameType)});default:return t}}}),define("stateManagement/selection/selectionActionTypes",[],function(){"use strict";return{SELECT_COMPONENTS:"selectComponents",ADD_TO_SELECTION:"addToSelection",CLEAR_SELECTED_COMPONENTS:"clearSelectedComponents",SET_SELECTED_COMPS_RESTRICTIONS:"setSelectedCompsRestrictions"}}),define("stateManagement/selection/selectionReducer",["lodash","coreUtilsLib","stateManagement/selection/selectionActionTypes"],function(e,t,n){"use strict";var a=n.SELECT_COMPONENTS,r=n.ADD_TO_SELECTION,o=n.CLEAR_SELECTED_COMPONENTS,i=n.SET_SELECTED_COMPS_RESTRICTIONS,s={selectedComponents:[],compRestrictions:{}};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,u=arguments[1];switch(u.type){case a:return e.isArray(u.compRefs)?e.defaults({selectedComponents:u.compRefs},n):(t.log.error("selected comps must be an array"),n);case r:return e.isArray(u.compRefs)?e.defaults({selectedComponents:n.selectedComponents.concat(u.compRefs)},n):(t.log.error("selected comps must be an array"),n);case o:return e.defaults({selectedComponents:[]},n);case i:return e.defaults({compRestrictions:u.restrictions},n);default:return n}}}),define("stateManagement/userProfile/userProfileActionTypes",[],function(){"use strict";return{SET_USER_PROFILE:"setUserProfile"}}),define("stateManagement/userProfile/userProfileReducer",["stateManagement/userProfile/userProfileActionTypes"],function(e){"use strict";var t=e.SET_USER_PROFILE;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case t:return n.userProfile;default:return e}}}),define("stateManagement/highlights/highlightsActionTypes",[],function(){"use strict";return{ADD_TO_HIGHLIGHTS:"addToHighlights",REMOVE_COMPS_FROM_HIGHLIGHTS:"removeCompsFromHighlights",SET_HIGHLIGHTS:"setHighlights",CLEAR_HIGHLIGHTS:"clearHighlights",REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE:"removeFromHighlightsByHighlightType"}}),define("stateManagement/highlights/highlightsReducer",["lodash","coreUtilsLib","stateManagement/highlights/highlightsActionTypes"],function(e,t,n){"use strict";var a=n.ADD_TO_HIGHLIGHTS,r=n.REMOVE_COMPS_FROM_HIGHLIGHTS,o=n.SET_HIGHLIGHTS,i=n.CLEAR_HIGHLIGHTS,s=n.REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments[1];switch(u.type){case a:return e.isArray(u.highlightsDefs)?n.concat(u.highlightsDefs):(t.log.error("highlights must be an array"),n);case r:return e.isArray(u.compRefs)?e.reject(n,function(t){return e.find(u.compRefs,t.compRef)}):(t.log.error("highlights must be an array"),n);case s:return e.isArray(u.highlightTypes)?e.reject(n,function(t){return e.includes(u.highlightTypes,t.type)}):(t.log.error("highlightTypes must be an array"),n);case o:return e.isArray(u.highlightsDefs)?u.highlightsDefs:(t.log.error("highlights must be an array"),n);case i:return[];default:return n}}}),define("stateManagement/store/initialEditorState",["constants"],function(e){"use strict";return{addPanel:{overridden:{categories:{},sections:{}}},editorIsInit:!1,previewReady:!1,config:{topBarHeight:e.UI.TOPBAR_HEIGHT,previewHeight:null,previewWidth:null,languages:["latin"],extraSiteHeight:40},navControlsSize:null,previewPosition:{top:e.UI.TOPBAR_HEIGHT,left:0,height:0,width:0},editingAreaPosition:{top:0,left:0,height:0,width:0,right:0,bottom:0},wixCodeLoaded:!1,devModeContext:{type:e.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,data:void 0},contextMenu:null,performingMouseMoveAction:!1,selection:{selectedComponents:[],compRestrictions:{}},userProfile:{},stage:{highlights:[]},uploadedFonts:{list:[],queue:[],uploadedItems:{},timeOutTokens:[]},focusedContainer:null,lastSelectionClickPos:null,previewMode:!1,isMobileEditor:!1,isLayoutTractorOpen:!1,snapData:null,lassoLayout:null,candidates:null,clipboard:{},site:{premiumPackage:void 0},topBar:{modeSwitchAnimationProgress:e.TOP_BAR.EDITOR_MODE_SWITCH.ANIMATION_PROGRESS.IDLE,openedDropPanel:null,dropPanelDisabled:!1,shouldDropPanelRemainOpen:!1,overridden:{buttons:{},menus:{},menuItems:{}}},viewTools:{toolbarEnabled:void 0,developerToolBarEnabled:void 0,platformToolBarEnabled:void 0,guidelinesEnabled:void 0,sectionsHandlesEnabled:void 0,snapToEnabled:void 0,rulersEnabled:void 0,rulers:{guidesState:void 0,selectedGuide:void 0,isHovered:void 0,isDragging:null}},hasDatabaseCollections:null,platformToolBarPanelProps:void 0,helpProps:null,attachCandidate:null,constraintArea:null,openPanels:[],previewingStatus:e.PROGRESS_STATUS.IDLE,savingStatus:e.PROGRESS_STATUS.IDLE,publishingStatus:e.PROGRESS_STATUS.IDLE,savePublish:{isSaveInProgress:!1,isPublishInProgress:!1,isDiffSaveInProgress:!1,publishPanelPromotionIndex:0},sitePremiumState:null,portalComps:{},mobile:{isHiddenItemsCounterVisible:!0,reAddedHiddenElement:{compRef:null,addingPhase:e.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.IDLE},mobileWizard:{enabled:!1,expanded:!1,currentStep:"",stepsToShow:[],userSelections:{tinyMenu:void 0,header:void 0,qab:void 0,backToTop:void 0},lastSaved:{tinyMenu:void 0,header:void 0,qab:void 0,backToTop:void 0},tinyMenu:{availableSkins:[],styleId:""},qab:{availablePresets:[]}}},applyModeFromClipboardSuggestion:null,leftBar:{isCollapsed:!1,isMobileCollapsed:!1,notifications:{},superApps:{desktop:[],mobile:[]},buttonsBoundingRect:{},overridden:{}},topBarPagesFilter:"",topBarCustomization:{tooltipOverrides:{UNDO:null,SAVE:null}},pageSections:{sections:null,selectedSection:null},siteScale:1,pinMode:{isOpen:!1,pinPreviewRectStyle:{opacity:0}},hideTools:!1,hideToolsAndMaintainStagePosition:!1,shouldHideToolsBtnBlink:!1,halfOpacityTools:!1,unreadComments:0,isOpenTextEditor:!1,imageCrop:{isOn:!1,cropArea:null,cropOriginArea:null},shouldOverlayUpdate:!0,tabIndicationState:{indication:"INACTIVE",activeMode:void 0},floatingBubble:{value:null,targetLayout:null,bubbleProps:{},shouldNotHideOnMouseLeaveTarget:!1},tpa:{appsIdsToRefreshOnDashboardClose:[]},scrollTo:null,animateScrollTo:null,eventCounters:{focus:0,clearTextSelection:0,forceOpenPagesQuickNavigation:0,forcePageSettingsTab:0},viewerRendersCounter:0,userPreferences:{siteId:null,dontSaveUserPrefs:!1,session:{},site:{},global:null},easterEggs:{flyingMusa:null},siteDisplayName:null,multilingual:{isEnabled:!1,defaultLanguage:null,siteLanguages:[],sitePublicLanguages:[],siteOriginalLanguage:null},__renderCounter:0}}),define("stateManagement/mobile/mobileWizard/mobileWizardActionTypes",[],function(){"use strict";return{SET_MOBILE_WIZARD_IS_ENABLED:"mobile-wizard-set-is-enabled",SET_MOBILE_WIZARD_IS_EXPANDED:"mobile-wizard-set-is-expanded",NEXT_STEP:"mobile-wizard-next-step",PREVIOUS_STEP:"mobile-wizard-previous-step",SET_TINY_MENU_AVAILABLE_SKINS:"mobile-wizard-set-tiny-menu-available-skins",SET_TINY_MENU_STYLE_ID:"mobile-wizard-set-tiny-menu-style-id",SET_BACK_TO_TOP:"mobile-wizard-set-back-to-top",SET_CURRENT_STEP:"mobile-wizard-set-current-step",SET_STEPS_TO_SHOW:"mobile-wizard-set-steps-to-show",SET_USER_SELECTIONS:"mobile-wizard-set-user-selections",SET_LAST_SAVED:"mobile-wizard-set-last-saved",SET_QAB_AVAILABLE_PRESETS:"mobile-wizard-set-qab-available-presets"}}),define("stateManagement/mobile/mobileWizard/mobileWizardTinyMenuReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.mobile.mobileWizard.tinyMenu,r=arguments[1];switch(r.type){case n.SET_TINY_MENU_AVAILABLE_SKINS:return e.assign({},a,{availableSkins:r.availableSkins});case n.SET_TINY_MENU_STYLE_ID:return e.assign({},a,{styleId:r.styleId});default:return a}}}),define("stateManagement/mobile/mobileWizard/mobileWizardQabReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.mobile.mobileWizard.qab,r=arguments[1];switch(r.type){case n.SET_QAB_AVAILABLE_PRESETS:return e.assign({},a,{availablePresets:r.availablePresets});default:return a}}}),define("stateManagement/mobile/mobileWizard/mobileWizardReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes","stateManagement/mobile/mobileWizard/mobileWizardTinyMenuReducer","stateManagement/mobile/mobileWizard/mobileWizardQabReducer"],function(e,t,n,a,r,o){"use strict";return t.redux.combineReducers({enabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.enabled,t=arguments[1];switch(t.type){case a.SET_MOBILE_WIZARD_IS_ENABLED:return t.enabled;default:return e}},expanded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.expanded,t=arguments[1];switch(t.type){case a.SET_MOBILE_WIZARD_IS_EXPANDED:return t.expanded;default:return e}},currentStep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.currentStep,t=arguments[1];switch(t.type){case a.SET_CURRENT_STEP:return t.currentStep;default:return e}},stepsToShow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.stepsToShow,t=arguments[1];switch(t.type){case a.SET_STEPS_TO_SHOW:return t.stepsToShow;default:return e}},userSelections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.userSelections,r=arguments[1];switch(r.type){case a.SET_USER_SELECTIONS:return e.assign({},t,_defineProperty({},r.stepName,r.stepValue));default:return t}},lastSaved:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.mobileWizard.lastSaved,r=arguments[1];switch(r.type){case a.SET_LAST_SAVED:return e.assign({},t,_defineProperty({},r.stepName,r.value));default:return t}},tinyMenu:r,qab:o})}),define("stateManagement/mobile/mobileReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardReducer"],function(e,t,n,a){"use strict";return t.redux.combineReducers({isHiddenItemsCounterVisible:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.isHiddenItemsCounterVisible},reAddedHiddenElement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.mobile.reAddedHiddenElement},mobileWizard:a})}),define("stateManagement/pinMode/pinModeActionTypes",[],function(){"use strict";return{OPEN_PIN_MODE:"openPinMode",CLOSE_PIN_MODE:"closePinMode",SHOW_PIN_PREVIEW_RECT:"showPinPreviewRect",HIDE_COMPONENT_PREVIEW_RECT:"hideComponentPreviewRect"}}),define("stateManagement/pinMode/pinModeReducer",["lodash","stateManagement/pinMode/pinModeActionTypes"],function(e,t){"use strict";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case t.OPEN_PIN_MODE:return e.defaults({isOpen:!0},n);case t.CLOSE_PIN_MODE:return e.defaults({isOpen:!1},n);case t.SHOW_PIN_PREVIEW_RECT:return e.defaults({pinPreviewRectStyle:a.style},n);case t.HIDE_COMPONENT_PREVIEW_RECT:var r=e.defaults({opacity:0},n.pinPreviewRectStyle);return e.defaults({pinPreviewRectStyle:r},n);default:return n}}}),define("stateManagement/easterEggs/easterEggsActionTypes",[],function(){"use strict";return{SET_FLYING_MUSA_STYLE:"setFlyingMusaStyle",CLEAR_FLYING_MUSA_STYLE:"clearFlyingMusaStyle"}}),define("stateManagement/easterEggs/easterEggsActions",["lodash","stateManagement/easterEggs/easterEggsActionTypes"],function(e,t){"use strict";var n=function(e){return{type:t.SET_FLYING_MUSA_STYLE,musaData:e}},a=function(e){return{type:t.CLEAR_FLYING_MUSA_STYLE,id:e}};return{showFlyingMusa:function(t){return function(r){var o=e.uniqueId(),i=8+Math.floor(5*Math.random()),s=-200,u=72+Math.random()*(t.height-144),l=72+Math.random()*(t.height-144),c=Math.abs(u-l)*(i/t.width);l<u&&(c*=-1);var d=u,p=0,f={height:3608,width:143};r(n({id:o,style:{top:u+"px",right:s+"px",backgroundPosition:"0 "+p+"px;"}}));var g=setInterval(function(){r(n({id:o,style:{right:(s+=i)+"px",top:(d+=c)+"px",backgroundPosition:"0 -"+p+"px"}})),p=(p+82)%f.height,s>t.width+f.width&&(clearInterval(g),clearTimeout(E),r(a(o)))},33),m=33*(10+(t.width+f.width)/i),E=setTimeout(function(){clearInterval(g),r(a(o))},m)}}}}),define("stateManagement/easterEggs/easterEggsSelectors",[],function(){"use strict";return{getFlyingMusaStyle:function(e,t){return e.easterEggs.flyingMusa[t].style}}}),define("stateManagement/easterEggs/easterEggsReducer",["lodash","stateManagement/easterEggs/easterEggsActionTypes"],function(e,t){"use strict";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case t.SET_FLYING_MUSA_STYLE:var r=e.defaults(_defineProperty({},a.musaData.id,a.musaData),n.flyingMusa);return e.defaults({flyingMusa:r},n);case t.CLEAR_FLYING_MUSA_STYLE:return e.defaults({flyingMusa:e.omit(n.flyingMusa,[a.id])},n);default:return n}}}),define("stateManagement/easterEggs/easterEggs",["stateManagement/easterEggs/easterEggsActions","stateManagement/easterEggs/easterEggsSelectors","stateManagement/easterEggs/easterEggsReducer"],function(e,t,n){"use strict";return{actions:e,selectors:t,reducer:n}}),define("stateManagement/contextMenu/contextMenuActionTypes",[],function(){"use strict";return{OPEN_CONTEXT_MENU:"openContextMenu"}}),define("stateManagement/contextMenu/contextMenuReducer",["lodash","stateManagement/pinMode/pinModeActionTypes","stateManagement/contextMenu/contextMenuActionTypes"],function(e,t,n){"use strict";return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments[1];switch(r.type){case n.OPEN_CONTEXT_MENU:return e.defaults({editorMousePosition:{x:r.editorPositionX,y:r.editorPositionY},viewerPosition:{x:r.viewerPositionX,y:r.viewerPositionY}},a);case t.OPEN_PIN_MODE:return null;default:return a}}}),define("stateManagement/panels/helpPropsReducer",["lodash","stateManagement/panels/panelsActionTypes"],function(e,t){"use strict";var n=t.OPEN_HELP_CENTER,a=t.CLOSE_HELP_CENTER;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case n:return t.helpPanelProps;case a:return null;default:return e}}}),define("stateManagement/legacy/legacyActionTypes",[],function(){"use strict";return{SET_STATE:"set-state"}}),define("stateManagement/legacy/setStateReducer",["lodash","stateManagement/legacy/legacyActionTypes"],function(e,t){"use strict";var n=t.SET_STATE,a=e.assign;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n:return a({},e,t.state);default:return e}}}),define("stateManagement/legacy/legacyReducer",["lodash","stateManagement/legacy/setStateReducer"],function(e,t){"use strict";return function(e){return function(n,a){var r=t(n,a);return e(r,a)}}}),define("stateManagement/devMode/devModeActionTypes",[],function(){"use strict";return{RESET_CONTEXT:"resetContext"}}),define("stateManagement/devMode/devModeReducer",["lodash","constants","stateManagement/devMode/devModeActionTypes"],function(e,t,n){"use strict";var a={type:t.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,data:void 0},r=n.RESET_CONTEXT;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;switch(arguments[1].type){case r:return a;default:return e}}}),define("stateManagement/store/stateFreezer",["util"],function(e){"use strict";var t=e.deepFreeze;return function(e){return function(n,a){return t(e(n,a))}}}),define("stateManagement/leftBar/leftBarReducer",["lodash","constants","stateManagement/leftBar/leftBarActionTypes"],function(e,t,n){"use strict";var a=n.COLLAPSE_DESKTOP_MENU,r=n.COLLAPSE_MOBILE_MENU,o=n.EXPAND_BUTTON,i=n.COLLAPSE_BUTTON,s=n.UPDATE_BUTTONS_BOUNDING_RECT,u=n.SET_NOTIFICATION_COUNT,l=n.INCREASE_NOTIFICATION_COUNT,c=n.DECREASE_NOTIFICATION_COUNT,d=n.REMOVE_PANEL_NOTIFICATIONS,p=n.UPDATE_DESKTOP_SUPERAPP_BUTTON,f=n.UPDATE_MOBILE_SUPERAPP_BUTTON,g=n.REMOVE_SUPERAPP_BUTTON,m=n.OVERRIDE_LEFT_BAR,E=function(t){return function(n,a){return e.defaults({superApps:e.defaults(_defineProperty({},t,a),n.superApps)},n)}},S=function(t){return function(n,a){var r=e.find(n.superApps[t],{panelName:a.panelName});if(r){var o=e.map(n.superApps[t],function(t){return t===r?e.defaults(a,t):t});return E(t)(n,o)}return E(t)(n,n.superApps[t].concat(a))}};return function(n,E){switch(E.type){case a:return e.assign({},n,{isCollapsed:!0});case r:return e.assign({},n,{isMobileCollapsed:!0});case o:return e.defaults({collapseOnClick:e.union(n.collapseOnClick,[E.panelName])},n);case i:return e.assign({},n,{collapseOnClick:e.without(n.collapseOnClick,E.panelName)});case s:var _=["left","right","top","bottom"],P=e.pick(n.buttonsBoundingRect,_),T=e.pick(E.boundingRect,_);return e.isEqual(P,T)?n:e.assign({},n,{buttonsBoundingRect:T});case u:return e.assign({},n,{notifications:e.assign({},n.notifications,_defineProperty({},E.panelName,E.count))});case l:return e.assign({},n,{notifications:e.assign({},n.notifications,_defineProperty({},E.panelName,n.notifications[E.panelName]+(E.count||1)))});case c:return e.assign({},n,{notifications:e.assign({},n.notifications,_defineProperty({},E.panelName,n.notifications[E.panelName]-(E.count||1)))});case g:var M={desktop:e.reject(n.superApps.desktop,{panelName:E.panelName}),mobile:e.reject(n.superApps.mobile,{panelName:E.panelName})};return e.defaults({superApps:M},n);case d:return e.defaults({notifications:e.omit(n.notifications,E.panelName)},n);case p:return S("desktop")(n,E.buttonParams);case f:return S("mobile")(n,E.buttonParams);case m:return e.assign({},n,{overridden:function(n){var a=E.overridden;return e(a).pick(e.map(t.OVERRIDDEN.LEFT_BAR,"PANEL_NAME")).mapValues(function(n,a){return e.pick(n,e.values(e.find(t.OVERRIDDEN.LEFT_BAR,["PANEL_NAME",a])))}).value()}()});default:return n}}}),define("stateManagement/topBar/topBarReducer",["lodash","constants","stateManagement/topBar/topBarActionTypes"],function(e,t,n){"use strict";var a=n.OVERRIDE_TOP_BAR;return function(n,r){switch(r.type){case a:return e.assign({},n,{overridden:function(n){var a=r.overridden,o=t.OVERRIDDEN.TOP_BAR,i=o.BUTTONS,s=o.MENUS,u=o.MENU_ITEMS,l=function(t,n){return e(t).pick(e.map(n,"KEY")).mapValues(function(t,a){return e.pick(t,e.values(e.find(n,["KEY",a])))}).value()};return e.assign(l(a,t.OVERRIDDEN.TOP_BAR),{buttons:l(a.buttons,i),menus:l(a.menus,s),menuItems:l(a.menuItems,u)})}()});default:return n}}}),define("stateManagement/userPreferences/userPreferencesActionTypes",[],function(){"use strict";return{SET_SITE_ID:"set-site-id",SET_PREFERENCES:"set-preferences",SET_PREFERENCE:"set-preference",MARK_SITE_PREFERENCES_NOT_DIRTY:"mark-site-preferences-not-dirty",DONT_SAVE_USER_PREFERENCES:"dont-save-user-preferences"}}),define("stateManagement/userPreferences/userPreferencesReducer",["lodash","stateManagement/userPreferences/userPreferencesActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_SITE_ID,r=t.SET_PREFERENCES,o=t.SET_PREFERENCE,i=t.MARK_SITE_PREFERENCES_NOT_DIRTY,s=t.DONT_SAVE_USER_PREFERENCES;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.userPreferences,u=arguments[1];switch(u.type){case a:return e.assign({},t,{siteId:u.siteId});case r:return e.assign({},t,_defineProperty({},u.typeId,u.preferences));case o:return e.assign({},t,_defineProperty({},u.typeId,e.assign({},t[u.typeId],_defineProperty({},u.key,u.value))));case i:return e.assign({},t,{site:e.mapValues(t.site,function(t){return e.assign({},t,{isDirty:!1})})});case s:return e.assign({},t,{dontSaveUserPrefs:!0});default:return t}}}),define("stateManagement/tpa/tpaActionTypes",[],function(){"use strict";return{ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:"ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE",SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:"SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE"}}),define("stateManagement/tpa/tpaReducer",["lodash","coreUtilsLib","stateManagement/tpa/tpaActionTypes"],function(e,t,n){"use strict";var a=n.ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,r=n.SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,o=function(t){return e.reduce(t,function(e,t){return e[t]=!0,e},{})},i=function(e){return!s(e)},s=function(t){return e.isArray(t)&&t.every(function(t){return e.isNumber(t)&&t>0||e.isNumber(parseInt(t,10))&&parseInt(t,10)>0})};return function(n,s){switch(e.isNil(n)&&(n={appsIdsToRefreshOnDashboardClose:{}}),s.type){case a:if(i(s.appIds))return t.log.error("appIds found for appDefIds must be an array of numbers"),n;var u=n.appsIdsToRefreshOnDashboardClose,l=o(s.appIds),c=e.merge({},u,l);return e.assign({},n,{appsIdsToRefreshOnDashboardClose:c});case r:return i(s.appIds)?(t.log.error("appIds found for appDefIds must be an array of numbers"),n):e.assign({},n,{appsIdsToRefreshOnDashboardClose:o(s.appIds)});default:return n}}}),define("stateManagement/uploadedFonts/uploadedFontsActionTypes",[],function(){"use strict";return{SET_LIST:"setList",SET_QUEUE:"setQueue",SET_FLAG_TO_QUEUE_ITEM:"setFlagToQueueItem",SET_UPLOADED_ITEMS:"setUploadedItems",ADD_TIME_OUT_TOKEN:"addTimeOutToken",CLEAR_TIME_OUT_TOKENS:"clearTimeOutTokens"}}),define("stateManagement/uploadedFonts/uploadedFontsReducer",["lodash","stateManagement/uploadedFonts/uploadedFontsActionTypes"],function(e,t){"use strict";var n=t.SET_LIST,a=t.SET_QUEUE,r=t.SET_FLAG_TO_QUEUE_ITEM,o=t.SET_UPLOADED_ITEMS,i=t.ADD_TIME_OUT_TOKEN,s=t.CLEAR_TIME_OUT_TOKENS;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],queue:[],uploadedItems:{},timeOutTokens:[]},u=arguments[1];switch(u.type){case n:return e.assign({},t,{list:u.list});case a:return e.assign({},t,{queue:u.queue});case r:var l=e.assign({},t.queue[u.queueItemIndex],u.flag),c=e.map(t.queue,function(e,t){return t===u.queueItemIndex?l:e});return e.assign({},t,{queue:c});case o:return e.assign({},t,{uploadedItems:u.uploadedItems});case i:var d=[].concat(_toConsumableArray(t.timeOutTokens),[u.timeOutToken]);return e.assign({},t,{timeOutTokens:d});case s:return e.assign({},t,{timeOutTokens:[]});default:return t}}}),define("stateManagement/siteDisplayName/siteDisplayNameActionTypes",[],function(){"use strict";return{SET_SITE_DISPLAY_NAME:"set-site-display-name"}}),define("stateManagement/siteDisplayName/siteDisplayNameReducer",["lodash","stateManagement/siteDisplayName/siteDisplayNameActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_SITE_DISPLAY_NAME;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.siteDisplayName,t=arguments[1];switch(t.type){case a:return t.siteDisplayName;default:return e}}}),define("stateManagement/multilingual/multilingualActionTypes",["lodash"],function(e){"use strict";var t=["_SUCCESS","_ERROR"];return e(["LOAD_LANGUAGES","LOAD_SUPPORTED_LANGUAGES","CHECK_LANGUAGE_STATUS"]).flatMap(function(e){return[e].concat(t.map(function(t){return e+t}))}).reduce(function(t,n){return e.assign(t,_defineProperty({},n,n))},{})}),define("stateManagement/multilingual/multilingualDataConverters",["lodash"],function(e){"use strict";return{convertMultilingualData:function(t){var n=t.languages,a=e.get(e.find(n,"primary"),"code",null);return{defaultLanguage:a,siteLanguages:e(n).map("code").without(a).value(),sitePublicLanguages:e(n).filter({status:"Active"}).map("code").value(),siteOriginalLanguage:a}},convertSupportedLanguageList:function(t){var n=t.languages,a=e.get(n,"0.code",null),r=e(n).map("code").uniq().value();return{defaultLanguage:a,siteLanguages:e.without(r,a),sitePublicLanguages:r,siteOriginalLanguage:a}},attachIsEnabled:e.curry(function(t,n){return e.assign({},n,{isEnabled:t})})}}),define("stateManagement/multilingual/multilingualReducer",["lodash","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualDataConverters"],function(e,t,n){"use strict";var a={isEnabled:!1,defaultLanguage:null,siteLanguages:[],sitePublicLanguages:[],siteOriginalLanguage:null},r=n.attachIsEnabled,o=n.convertMultilingualData,i=n.convertSupportedLanguageList;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,s=arguments[1],u=s.type,l=s.payload;switch(u){case t.CHECK_LANGUAGE_STATUS_SUCCESS:return r(l,n);case t.LOAD_LANGUAGES_SUCCESS:return e.assign({},n,o(l.data));case t.LOAD_SUPPORTED_LANGUAGES_SUCCESS:return e.assign({},n,i(l.data));case t.LOAD_LANGUAGES_ERROR:case t.CHECK_LANGUAGE_STATUS_ERROR:case t.LOAD_SUPPORTED_LANGUAGES_ERROR:return r(!1,a);default:return n}}}),define("stateManagement/store/createEditorStore",["lodash","reduxLibs","util","stateManagement/addPanel/addPanelReducer","stateManagement/store/combineReducers","stateManagement/panels/panelsReducer","stateManagement/selection/selectionReducer","stateManagement/userProfile/userProfileReducer","stateManagement/highlights/highlightsReducer","stateManagement/mobile/mobileReducer","stateManagement/pinMode/pinModeReducer","stateManagement/easterEggs/easterEggs","stateManagement/contextMenu/contextMenuReducer","stateManagement/panels/helpPropsReducer","stateManagement/legacy/legacyReducer","stateManagement/devMode/devModeReducer","stateManagement/store/initialEditorState","stateManagement/store/stateFreezer","stateManagement/leftBar/leftBarReducer","stateManagement/topBar/topBarReducer","stateManagement/userPreferences/userPreferencesReducer","stateManagement/tpa/tpaReducer","stateManagement/uploadedFonts/uploadedFontsReducer","stateManagement/siteDisplayName/siteDisplayNameReducer","stateManagement/multilingual/multilingualReducer"],function(e,t,n,a,r,o,i,s,u,l,c,d,p,f,g,m,E,S,_,P,T,M,A,O,v){"use strict";var h=t.redux,I=t.reduxThunk;return function(e,t){var y=g(r({addPanel:a,openPanels:o,helpProps:f,devModeContext:m,stage:r({highlights:u}),mobile:l,contextMenu:p,pinMode:c,uploadedFonts:A,userProfile:s,selection:i,leftBar:_,topBar:P,tpa:M,userPreferences:T,easterEggs:d.reducer,siteDisplayName:O,multilingual:v})),N=e?S(y):y,R=I.withExtraArgument(t),b=n.url.getParameterByName("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:h.compose;return h.createStore(N,E,b(h.applyMiddleware(R)))}}),define("stateManagement/store/throttledStore",["lodash","util"],function(e,t){"use strict";var n=function(e){return e()},a=t.animationFrameRenderer;return function(t,r,o){var i=[],s=function(){return e.forEach(i,n)},u=a(t,r,s),l=e.noop;o.subscribe(function(){l=u()});return e.defaults({subscribe:function(t){return i=e.concat(i,t),function(){i=e.without(i,t)}},dispatch:o.dispatch,getState:o.getState,flush:function(){l(),s()}},o)}}),define("stateManagement/legacy/setStateAction",["stateManagement/legacy/legacyActionTypes"],function(e){"use strict";var t=e.SET_STATE;return function(e){return{type:t,state:e}}}),define("stateManagement/preview/previewSelectors",[],function(){"use strict";return{isPreviewReady:function(e){return e.previewReady}}}),define("stateManagement/preview/preview",["stateManagement/preview/previewSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/popups/popupsSelectors",["stateManagement/preview/preview"],function(e){"use strict";var t=e.selectors.isPreviewReady;return{isPopUpMode:function(e,n){return Boolean(t(e)&&n.pages.popupPages.getCurrentPopupId())}}}),define("stateManagement/popups/popups",["stateManagement/popups/popupsSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/leftBar/leftBarData",["util","coreBi","constants","experiment"],function(e,t,n,a){"use strict";var r={panelName:n.ROOT_COMPS.LEFTBAR.MY_UPLOADS_PANEL_NAME,panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"};return{desktop:function(){var r=[{panelName:n.ROOT_COMPS.LEFTBAR.ADD_PANEL_NAME,panelProps:{},label:"LEFTBAR_ADD_LABEL",className:"add-panel",symbolName:"leftBarAddPanel",hintProps:{id:"AddPanel"}},{panelName:n.ROOT_COMPS.LEFTBAR.ADD_APPS_PANEL_NAME,panelProps:{urlParams:{openMarketOrigin:"market_button"},openPanelBiEvent:e.bi.events.OPEN_MARKET_CLICK,openPanelBiParams:{referral_info:"market_button"}},label:"app_market_button_text",className:"app-market-panel",symbolName:"leftBarAppMarketPanel",hintProps:{id:"AppMarket"}},{panelName:n.ROOT_COMPS.LEFTBAR.MY_UPLOADS_PANEL_NAME,panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"}];a.isOpen("ChangeBG")||(r=[{panelName:n.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME,panelProps:{},label:n.ROOT_COMPS.LEFTBAR.BACKGROUND_LABEL,className:"bg-panel",symbolName:"leftBarBackgroundPanel",hintProps:{id:"ChangeBackgrounds"}}].concat(r));a.isOpen("newPagesPanel")&&(r=[{panelName:n.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_PANEL_NAME,panelProps:{openPanelBiEvent:t.events.pages.click_on_pages_panel_open,openPanelBiParams:{origin:"left_bar"}},label:"LEFTBAR_PAGES_LABEL",className:"pages-panel-pp",symbolName:"leftBarPagesPanelManager"}].concat(r));a.isOpen("us_addPages_leftBar")&&(r=[{panelName:"rEditor.panels.pagesAndPopupsPanel",panelProps:{},label:"Pages_Menu_Title_Title",className:"bg-panel",symbolName:"leftBarPagesPanel",hintProps:{id:"PagesPanel"}}].concat(r));return r}(),mobile:function(){var e=[];a.isOpen("newPagesPanel")&&e.push({panelName:n.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_PANEL_NAME,panelProps:{},label:"LEFTBAR_PAGES_LABEL",className:"pages-panel-pp",symbolName:"leftBarPagesPanelManager"});var t={panelName:n.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME,panelProps:{},label:n.ROOT_COMPS.LEFTBAR.BACKGROUND_LABEL,className:"bg-panel",symbolName:"leftBarBackgroundPanel",hintProps:{id:"ChangeBackgrounds"}},r={panelName:n.ROOT_COMPS.LEFTBAR.MOBILE_TOOLS_PANEL_NAME,panelProps:{},label:"mobile_features_section_title_mobile_tools",className:"mobile-elements-panel",symbolName:"mobileView",tooltips:[{id:"mobileElementsPanel_quickActionBar_afterRemove",value:"mobile_quick_actions_hide_tooltip",width:"240px"}]};return a.isOpen("changeBG")?e.push(r,t):e.push(t,r),e=e.concat([{panelName:n.ROOT_COMPS.LEFTBAR.HIDDEN_ELEMENTS_PANEL_NAME,panelProps:{},label:"mobile_hidden_items_panel_title",className:"hidden-items-panel",symbolName:"hiddenComp",hintProps:{id:"MobileEditorHiddenElements"}},{panelName:n.ROOT_COMPS.LEFTBAR.PAGE_LAYOUT_OPTIMIZER_PANEL_NAME,panelProps:{},label:"mobile_layoutoptimizer_title",className:"layout-optimizer-panel",symbolName:"mobile_left_bar_optimize_layout",hintProps:{id:"MobileLayoutOptimizer"}}])}(),myUploadsButton:r}}),define("stateManagement/leftBar/leftBarSelectors",["lodash","reduxLibs","coreUtilsLib","stateManagement/leftBar/leftBarData","constants","experiment"],function(e,t,n,a,r,o){"use strict";var i=t.reselect.createSelector,s=function(e){return e.leftBar},u=function(e){return e.isMobileEditor},l=i(s,u,function(t,n){return e.get(t,n&&o.isOpen("se_mobileLeftBarNotCollapsed")?"isMobileCollapsed":"isCollapsed")}),c=i(s,function(e){return e.collapseOnClick});return{getLeftBar:s,isCollapsed:l,getCollapseOnClick:c,isMobileEditor:u,getDesktopSuperAppsCount:function(e){return e.leftBar.superApps.desktop.length},getMenuItems:function(t,i){var s=[],u=t.leftBar.superApps,l=[];return o.isOpen("enableMyUploadsButton")&&l.push(a.myUploadsButton),s=t.isMobileEditor?e.map(a.mobile,e.clone).concat(l,e.sortBy(n.objectUtils.cloneDeep(u.mobile),"order")):e.map(a.desktop,e.clone).concat(l,e.sortBy(n.objectUtils.cloneDeep(u.desktop),"order")),(s=i?function(t){var n=[r.ROOT_COMPS.LEFTBAR.BLOG_PANEL_NAME,r.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME];return e.filter(t,function(t){return!e.includes(n,t.panelName)})}(s):s).forEach(function(n,a){n.panelProps=n.panelProps||{},n.panelProps.panelIndex=a,n.collapseOnClick=function(t,n){return e.includes(t||[],n)}(c(t),n.panelName)}),e.compact(s).map(function(e){if("tpa.compPanels.appMarketPanel"===e.panelName){switch((o.getValue("se_appMarketIcons")||"old").toLowerCase()){case"icon1":e.symbolName="leftBarAppMarketPanel-B";break;case"icon2":e.symbolName="leftBarAppMarketPanel-C";break;case"icon3":e.symbolName="leftBarAppMarketPanel-D"}switch((o.getValue("se_appMarketLabels")||"old").toLowerCase()){case"add_apps":e.label="app_market_button_text_experiment_add_apps";break;case"get_apps":e.label="app_market_button_text_experiment_get_apps"}}return e})},getNotifications:function(e){return e.leftBar.notifications},getNotificationsCount:function(e,t){return e.leftBar.notifications[t]},getOverriddenItems:function(e){return e.leftBar.overridden}}}),define("stateManagement/userPreferences/constants",[],function(){"use strict";return{EDITOR_APP_ID:"editorAppId"}}),define("stateManagement/userPreferences/getKeyFromAppId",["lodash","stateManagement/userPreferences/constants"],function(e,t){"use strict";return function(n,a){return e.defaultTo(n,t.EDITOR_APP_ID)+"_"+a}}),define("stateManagement/userPreferences/userPreferencesSelectors",["lodash","coreUtilsLib","stateManagement/userPreferences/constants","stateManagement/userPreferences/getKeyFromAppId"],function(e,t,n,a){"use strict";var r=function(e){return e.userPreferences.site},o=function(e){return e.userPreferences.global},i=function(e){return e.userPreferences.session},s=function(t,o){return function(i){if(o=o||n.EDITOR_APP_ID,!e.isString(t))throw new Error("Getting a user preference for the site expects a key of type string but received: "+t);var s=a(o,t),u=r(i);return u[s]&&u[s].value}},u=function(n){return function(a){var r=o(a);if(null===r)return t.log.error("Global user preferences failed to load!"),null;if(!e.isString(n))throw new Error("Getting a global user preference expects a key of type string but received: "+n);return r[n]}},l=function(t){return function(n){if(!e.isString(t))throw new Error("Getting a session user preference expects a key of type string but received: "+t);return i(n)[t]}};return{getSiteId:function(e){return e.userPreferences.siteId},getPreferences:function(e){return function(t){return t.userPreferences[e]}},arePreferencesEmpty:function(t){return function(n){return e.isEmpty(n.userPreferences[t])}},dontSaveUserPrefs:function(e){return e.userPreferences.dontSaveUserPrefs},getAllGlobalUserPreferences:function(e){var n=o(e);return null===n?(t.log.error("Global user preferences failed to load!"),null):n},getGlobalUserPreferences:u,getAllSiteUserPreferences:function(t){return function(t){return function(n){return e.transform(r(n),function(e,n,a){var r=a.split("_");r[0]===t&&(e[r[1]]=n.value)},{})}}(n.EDITOR_APP_ID)(t)},getSiteUserPreferences:s,getAllSessionUserPreferences:function(e){return i(e)},getSessionUserPreferences:l,getUserPreferences:function(e){switch(e){case"site":return s;case"session":return l;case"global":return u}},getMediaPath:function(e){return function(t){return l("last_media_path_"+e)(t)||""}}}}),define("stateManagement/userPreferences/userPreferencesActions",["stateManagement/userPreferences/userPreferencesActionTypes"],function(e){"use strict";return{setSiteId:function(t){return{type:e.SET_SITE_ID,siteId:t}},setPreferences:function(t,n){return{type:e.SET_PREFERENCES,typeId:t,preferences:n}},setPreference:function(t,n,a){return{type:e.SET_PREFERENCE,typeId:t,key:n,value:a}},markSitePreferencesNotDirty:function(){return{type:e.MARK_SITE_PREFERENCES_NOT_DIRTY}},dontSaveUserPreferences:function(){return{type:e.DONT_SAVE_USER_PREFERENCES}}}}),define("stateManagement/userPreferences/userPreferencesLogic",["lodash","jquery","coreUtilsLib","util","stateManagement/userPreferences/userPreferencesActions","stateManagement/userPreferences/userPreferencesSelectors","stateManagement/userPreferences/constants","stateManagement/userPreferences/getKeyFromAppId"],function(e,t,n,a,r,o,i,s){"use strict";var u,l=i.EDITOR_APP_ID,c=a.serviceTopology.premiumStateApiUrl,d=c?c.replace(/\/getTpaPremiumState/,"-user-preferences-webapp/"):"https://editor.wix.com/_api/wix-user-preferences-webapp/",p="site",f="global",g=(u={},_defineProperty(u,p,{load:function(e){return d+"getVolatilePrefsForSite/htmlEditor/"+e},SAVE:d+"bulkSet",DELETE:d+"delete"}),_defineProperty(u,f,{load:function(){return d+"getVolatilePrefForKey/htmlEditor/global_preferences"},SAVE:d+"set"}),u),m=function(){return a.url.isTrue("fakeUserPrefs")},E=function(e){return o.getSiteId(e())},S=function(t,n,a){return e.mapValues(t,function(t){return{value:e.isUndefined(a)?t:a,isDirty:n}})},_=function(e,t){t===p&&e(r.markSitePreferencesNotDirty())},P=function(a,i,s,u,l){if(null!==o.getPreferences(s)(i())){if(m()){var c=function(t,a){switch(a){case f:return{global_preferences:o.getPreferences(f)(t())};case p:var r={};return e.forEach(o.getPreferences(p)(t()),function(e,t){r[t]=e.value}),r.version=3,r;default:return n.log.error("unknown type ID"),{}}}(i,s);return window.sessionStorage.setItem("user_prefs_"+s,JSON.stringify(c)),_(s),void(u&&u())}if(!o.dontSaveUserPrefs(i())){var d=function(t,n){switch(n){case f:return{nameSpace:"htmlEditor",key:"global_preferences",blob:o.getPreferences(f)(t())};case p:return function(t,n){var a={nameSpace:"htmlEditor",siteId:E(t),data:{}};return e.forEach(n,function(e,t){e.isDirty&&(a.data[t]=e.value)}),a.data.version=3,a}(t,o.getPreferences(p)(t()))}}(i,s);d?t.ajax(g[s].SAVE,{type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(d),success:function(){_(s),u&&u()},error:function(e){413===e.status&&a(r.dontSaveUserPreferences()),l&&l(e)}}):u&&u()}}else l&&l("saving "+s+" preferences failed since they were not loaded")},T=function(i,u,c,d,_,T){i(r.setPreferences(c,d?function(a,r,o){switch(r){case f:return o.global_preferences;case p:return function(n,a){if(3===a.version)return S(a,!0);var r=e.assign({},e.omit(a,l,"version"),a[l]);return function(n,a){e.forEach(a,function(e,a){return function(e,n){m()||t.ajax(g.site.DELETE,{type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(function(e,t){return{nameSpace:"htmlEditor",key:t,siteId:E(e)}}(e,n))})}(n,a)})}(n,a),r=e.transform(r,function(e,t,n){e[s(l,n)]=t},{}),r.version=3,S(r,!0)}(a,o);default:return n.log.error("unknown type ID"),{}}}(u,c,d):{})),function(e){var t=a.url.getParameterByName("resetUserPrefs").toLowerCase();return"all"===t||t===e}(c)?function(e,t,n,a,i){switch(n){case f:return function(e,t,n,a){e(r.setPreferences(f,{})),P(e,t,f,n,a)}(e,t,a,i);case p:(function(e,t,n,a){e(r.setPreferences(p,S(o.getPreferences(p)(t()),!0,null))),P(e,t,p,n,a)})(e,t,a,i)}}(i,u,c,_,T):_&&_()},M=function(e,n,a,r,o){if(m()){var i=window.sessionStorage.getItem("user_prefs_"+a);T(e,n,a,JSON.parse(i),r,o)}else t.ajax(g[a].load(E(n)),{type:"GET",headers:{Accept:"application/json"},success:function(t){T(e,n,a,t,r,o)},error:function(e){o&&o(e)}})},A=function(t,a){return function(i,s){if(!e.isString(t))throw new Error("Setting a global user preference expects a key of type string but received: "+t);return new Promise(function(u,l){null===o.getPreferences(f)(s())?(n.log.error("Global user preferences failed to load!"),l("Global user preferences failed to load!")):(e.isUndefined(a)&&(a=null),i(r.setPreference(f,t,a)),P(i,s,f,u,l))})}},O=function(t,n,a){return function(o,i){if(!e.isString(t))throw new Error("Setting a user preference for the site expects a key of type string but received: "+t);return new Promise(function(u,c){a=a||l,e.isUndefined(n)&&(n=null);var d={value:n,isDirty:!0};t=s(a,t),o(r.setPreference(p,t,d)),E(i)?P(o,i,p,u,c):u()})}},v=function(t,n){return function(a){if(!e.isString(t))throw new Error("Setting a session user preference expects a key of type string but received: "+t);return a(r.setPreference("session",t,n)),n}};return{loadGlobalPreferences:function(){return function(t,a){return new Promise(function(o,i){M(t,a,f,o,function(a){if(a&&a.responseText&&3001===e.get(JSON.parse(a.responseText),"errorCode"))return t(r.setPreferences(f,{})),void o();t(r.setPreferences(f,null)),n.log.error("Global preferences failed to load!"),i("Global preferences failed to load!")})})}},loadSitePreferences:function(t,a){return function(i,s){return new Promise(function(u,l){var c=o.arePreferencesEmpty(p)(s());i(r.setSiteId(t));var d=e.partial(P,i,s,p,u,l);if(a)c||d();else if(c)M(i,s,p,d,function(){n.log.error("Site preferences failed to load!"),l("Site preferences failed to load!")});else{var f=o.getPreferences(p)(s());M(i,s,p,function(){i(r.setPreferences(p,e.merge(o.getPreferences(p)(s()),f))),d()},function(){n.log.error("Site preferences failed to load!"),d()})}})}},setGlobalUserPreferences:A,setSiteUserPreferences:O,setSessionUserPreferences:v,setSitePreferences:function(e){switch(e){case"site":return O;case"session":return v;case"global":return A}}}}),define("stateManagement/userPreferences/userPreferences",["stateManagement/userPreferences/userPreferencesSelectors","stateManagement/userPreferences/userPreferencesActions","stateManagement/userPreferences/userPreferencesLogic","stateManagement/userPreferences/userPreferencesReducer"],function(e,t,n,a){"use strict";return{logic:n,selectors:e,actions:t,reducer:a}}),define("stateManagement/panels/panelsActions",["stateManagement/panels/panelsActionTypes"],function(e){"use strict";var t=e.OPEN_PANEL,n=e.UPDATE_PANEL,a=e.CLOSE_ALL_PANELS,r=e.CLOSE_PANEL_BY_NAME,o=e.CLOSE_PANEL_BY_PROP,i=e.STAGE_MOUSE_DOWN,s=e.OPEN_HELP_CENTER,u=e.CLOSE_HELP_CENTER;return{openPanel:function(e){return{type:t,panelDescriptor:e}},updatePanel:function(e){return{type:n,panelDescriptor:e}},closeAllPanels:function(){return{type:a}},closePanelByName:function(e){return{type:r,panelName:e}},closePanelByPropKey:function(e,t){return{type:o,prop:e,propValue:t}},stageMouseDown:function(){return{type:i}},setPanelType:function(e,t,a){return{type:n,panelDescriptor:{name:e,frameType:t,singleInstance:a}}},openHelpCenter:function(e){return{type:s,helpPanelProps:e}},closeHelpCenter:function(){return{type:u}}}}),define("stateManagement/panels/panelsSelectors",["lodash","reduxLibs"],function(e,t){"use strict";var n=function(e){return e.openPanels};return{selectOpenPanels:n,selectOpenPlatformPanels:t.reselect.createSelector(n,function(t){return e.filter(t,{type:"platform"})}),selectHelpProps:function(e){return e.helpProps},isColorPickerClosed:t.reselect.createSelector(n,function(t){return!e.some(t,{name:"panels.toolPanels.colorPicker.colorPickerPanel"})}),isLinkDialogClosed:t.reselect.createSelector(n,function(t){return!e.some(t,{name:"panels.toolPanels.linkPanel"})})}}),define("stateManagement/devMode/devModeSelectors",[],function(){"use strict";return{selectDevModeContext:function(e){return e.devModeContext}}}),define("stateManagement/devMode/devModeActions",["stateManagement/devMode/devModeActionTypes"],function(e){"use strict";var t=e.RESET_CONTEXT;return{resetDevModeContext:function(){return{type:t}}}}),define("stateManagement/bi/bi",["lodash","util"],function(e,t){"use strict";return{event:function(n,a){return function(r,o,i){var s=i.dsWrite;if(s){n=e.defaults({},n,{src:38,endpoint:"editor",sampleRatio:0,esi:t.editorModel.editorSessionId}),a=[].concat(a)||[{}];var u=t.editorModel.permissionsInfo;if(u){var l=u.ownerId,c=e.map(u.loggedInUserRoles,"role").join(",");a=e.map(a,function(t){return e.assign({},t,{ownerId:l,roles:c})})}e.forEach(a,function(e){s.bi.event(n,e)})}}},error:function(e,t){return function(n,a,r){r.dsWrite.bi.error(e,t)}}}}),define("stateManagement/panels/panelsLogic",["lodash","util","stateManagement/panels/panelsSelectors","stateManagement/devMode/devModeSelectors","stateManagement/panels/panelsActions","stateManagement/devMode/devModeActions","stateManagement/bi/bi","coreUtilsLib","constants","coreBi"],function(e,t,n,a,r,o,i,s,u,l){"use strict";function c(t,n){return e.defaults({},n,{panelName:t,key:t+e.uniqueId()})}function d(t,n){t&&e.isFunction(t.resolve)&&t.resolve(n)}var p=a.selectDevModeContext,f=n.selectOpenPanels,g=n.selectOpenPlatformPanels,m=function(t){return function(n,a){var r=a(),i=f(r),s=e.difference(t,i),l=e.filter(s,{name:"platformPanels.fullStagePanel"});e.isEmpty(l)||p(r).type!==u.DEVELOPER_MODE.CONTEXT_TYPES.COLLECTION||n(o.resetDevModeContext())}},E=function(t,n,a){return function(o,i){a||o(_()),e.includes(t,"help")&&s.log.error("openPanel method is deprecated for help panels. Use openHelpCenter instead");var u=f(i()),l=e.find(u,{name:t});o(l&&l.singleInstance?r.updatePanel({name:t,props:n}):S(t,n))}},S=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var o={name:t,props:c(t,n)};e.get(n,"token")&&e.assign(o,{token:e.get(n,"token")}),a(r.openPanel(o)),a(i.event(l.events.panels.PANEL_OPENED,{panel_name:t}))}},_=function(){return function(t,n){var a=n(),o=f(a);e.forEach(o,function(e){t(i.event(l.events.panels.PANEL_CLOSED,{panel_name:e.name}))}),function(t){e.forEach(t,function(e){d(e)})}(g(a)),t(r.closeAllPanels()),t(m(o))}},P=function(t,n){return function(a,o){var s=o(),u=f(s);e(s).thru(g).filter(function(e){return e.props[t]===n}).forEach(function(e){d(e)}),a(r.closePanelByPropKey(t,n));var c=f(o()),p=e.difference(u,c);e.forEach(p,function(e){a(i.event(l.events.panels.PANEL_CLOSED,{panel_name:e.props.panelName}))}),a(m(u))}},T=function(e){return function(t){t(P("panelName",e))}},M=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){a(_());var o={name:t,props:e.assign({},c(t,n),{useLastPanelPosition:!!n.useLastPanelPosition}),frameType:u.PANEL_TYPES.COMP};a(r.openPanel(o)),a(i.event(l.events.panels.PANEL_OPENED,{panel_name:t}))}};return{updateOrOpenPanel:E,openComponentPanel:M,openPlatformPanel:function(t){return function(n){var a=e.assign({name:t.panelName,props:c(t.panelName,t.panelProps),type:u.PANEL_TYPES.PLATFORM,token:t.panelProps.token},e.get(t,"panelMetaData",{}));n(E(a.name,a.props,!a.closeAllOtherPanels)),n(r.updatePanel(a))}},closeOpenedPanels:_,closePanelByPropKey:P,closePanelByName:T,openHelpCenter:function(n,a,o){return function(s){var c=[],d=function(){var n=t.editorModel.permissionsInfo;return n?"ownerId="+n.ownerId+"&roles="+e.map(n.loggedInUserRoles,"role").join(","):""}();d&&c.push(d),o&&o.component&&c.push("selectedCompType="+o.component);var p=n||u.GENERAL_HELP_KEY,f=c.length?p+"?"+c.join("&"):p,g=e.assign({},a,{helpUrl:f,biHelpParams:o,panelName:"panels.helpPanels.helpPanel"});s(r.openHelpCenter(g));var m=e.assign({learn_more:!1},o);s(i.event(l.events.help.HELP_CLICK,m))}},closeAllPanelsOfType:function(t){return function(n,a){var r=f(a());e(r).filter({frameType:t}).map("name").map(T).forEach(n)}},closePlatformPanel:function(t,n){return function(a,r){var o=f(r()),i=e.find(o,{token:t});i&&(d(i,n),a(T(i.name)))}},openFirstTimePanel:function(t){return function(n){if(e.includes(u.FIRST_TIME_PANEL_COMPONENTS,t)){var a="compPanels.panels."+t+".firstTime";n(M(a,{panelName:a,title:"firstTime"}))}}},updatePanel:function(e,t){return function(n){n(r.updatePanel({name:e,props:t}))}}}}),define("stateManagement/leftBar/leftBarLogic",["lodash","coreBi","constants","experiment","stateManagement/leftBar/leftBarActions","stateManagement/leftBar/leftBarSelectors","stateManagement/userPreferences/userPreferences","stateManagement/panels/panelsActions","stateManagement/panels/panelsLogic","stateManagement/bi/bi","stateManagement/userPreferences/userPreferencesSelectors"],function(e,t,n,a,r,o,i,s,u,l,c){"use strict";var d=l.event,p=function(){return function(e,t){e(o.isMobileEditor(t())&&a.isOpen("se_mobileLeftBarNotCollapsed")?r.collapseMobileMenu():r.collapseDesktopMenu())}};return{collapseMenu:p,collapseButton:function(e){return function(t){t(r.collapseButton(e)),t(i.logic.setSiteUserPreferences(e+n.LEFT_BAR.WAS_BUTTON_CLICKED_KEY,!0))}},openAddPanel:function(){return function(e){e(p()),e(u.updateOrOpenPanel("addPanelInfra.addPanel"))}},sendBIButtonsCount:function(a){return function(r,i,s){var u=s.dsRead,l=o.getMenuItems(i(),a),c=u&&u.generalInfo.getSiteId();if(c){var p=e.map(l,"panelName"),f={count:l.length,site_id:c,shoutout_bool:e.includes(p,n.SUPER_APPS.SHOUTOUT_PANEL_NAME),blog_bool:e.includes(p,n.SUPER_APPS.BLOG_PANEL_NAME),social_blog_bool:e.includes(p,n.SUPER_APPS.NEW_BLOG_PANEL_NAME),booking_bool:e.includes(p,n.SUPER_APPS.BOOKINGS_PANEL_NAME),ecomm_bool:e.includes(p,n.SUPER_APPS.WIX_STORE_PANEL_NAME),rest_bool:!1};r(d(t.events.leftBar.LEFT_BAR_NUMBER_OF_BUTTONS,f))}}},addSuperAppsButton:function(t,a,o,i,s,u,l,d){return function(p,f){var g=function(t,a,r,o,i,s){return{panelName:t,panelProps:a,label:r,className:o,symbolName:i,order:e.indexOf(n.LEFT_BAR.SUPER_APPS_ORDER.DESKTOP,t),isButtonOpen:s}}(t,a,o,i,s,d);p(r.updateDesktopSuperAppButton(g)),u&&p(r.updateMobileSuperAppButton(g));var m=c.getSiteUserPreferences(t+n.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)(f());l&&!m&&p(r.expandButton(t))}},removeSuperAppsButton:function(e){return function(t){t(r.removeSuperAppButton(e)),t(r.removePanelNotifications(e)),t(s.closePanelByName(e))}}}}),define("stateManagement/leftBar/leftBar",["stateManagement/leftBar/leftBarLogic","stateManagement/leftBar/leftBarActions","stateManagement/leftBar/leftBarReducer","stateManagement/leftBar/leftBarSelectors","stateManagement/leftBar/leftBarData"],function(e,t,n,a,r){"use strict";return{logic:e,actions:t,reducer:n,selectors:a,leftBarData:r}}),define("stateManagement/siteDisplayName/siteDisplayNameActions",["stateManagement/siteDisplayName/siteDisplayNameActionTypes"],function(e){"use strict";return{setSiteDisplayName:function(t){return{type:e.SET_SITE_DISPLAY_NAME,siteDisplayName:t}}}}),define("stateManagement/siteDisplayName/siteDisplayNameLogic",["jquery","stateManagement/siteDisplayName/siteDisplayNameActions"],function(e,t){"use strict";return{fetchSiteDisplayName:function(n){return function(a){return new Promise(function(r,o){e.ajax("/_api/site-properties-service/properties?fields.paths=siteDisplayName",{type:"GET",headers:{Authorization:"MSID."+n},success:function(e){a(t.setSiteDisplayName(e.properties.siteDisplayName)),r()},error:function(e){o(e)}})})}}}}),define("stateManagement/siteDisplayName/siteDisplayName",["stateManagement/siteDisplayName/siteDisplayNameActions","stateManagement/siteDisplayName/siteDisplayNameLogic","stateManagement/siteDisplayName/siteDisplayNameReducer"],function(e,t,n){"use strict";return{logic:t,actions:e,reducer:n}}),define("stateManagement/dataFixers/dataFixers",["lodash","util","stateManagement/bi/bi","coreBi"],function(e,t,n,a){"use strict";return{runDataFixers:function(){return function(r){e.defer(function(){r(function(r,o,i){var s=i.dsRead,u=i.dsWrite,l=e.find(s.pages.getPagesData(),{appPageId:"7326bfbb-4b10-4a8e-84c1-73f776051e10"}),c=t.translate("Pages_Blog_Post_Title");l&&l.title!==c&&(u.pages.data.update(l.id,{title:c}),r(n.event(a.events.dataFixers.blogSinglePostFix,{msid:s.generalInfo.getMetaSiteId()})))})})}}}}),define("stateManagement/store/dsPaths.json",[],function(){return{read:["errors","generalInfo.getSiteId","generalInfo.getUserInfo","generalInfo.urlFormat.isSlash","generalInfo.isHttpsEnabled","generalInfo.getPublicUrl","generalInfo.getMetaSiteId","pages.getReference","pages.getFocusedPageId","pages.getPrimaryPageId","pages.getPagesData","pages.popupPages.getCurrentPopupId","components.behaviors.get","behaviors.getDefinition","components.buildDefaultComponentStructure","components.isDescendantOfComp","components.getPage","components.data.get","components.getContainer","components.getAncestors","components.design.get","components.properties.get","components.getType","components.layout.getSnugLayout","components.layout.getSnugLayoutRelativeToScreen","components.layout.getSnugLayoutRelativeToScreenConsideringScroll","components.layout.getSnugLayoutRelativeToStructure","components.layout.canBeFixedPosition","components.layout.get","components.layout.getDock","components.layout.getRelativeToScreen","components.layout.getRelativeToStructure","components.layout.isHorizontallyStretched","components.layout.isHorizontallyStretchedToScreen","components.skin.get","components.style.getId","components.is.horizontallyMovable","data.isItemValid","tpa.app.getDataByAppDefId","platform.controllers.connections.get","platform.controllers.getStageData","platform.controllers.connections.getConnectedComponents","platform.controllers.getStageData","theme.skins.getComponentSkins","tpa.app.getDataByAppDefId"],write:["waitForChangesApplied","components.behaviors.update","components.behaviors.remove","components.setContainer","components.reparentComponentToPage","components.multiComponents.distribute","components.multiComponents.matchSize","bi.event","bi.error","renderPlugins.setCompsToShowOnTop","renderPlugins.setBlockingLayer","pages.data.update"]}}),define("stateManagement/legacy/legacyLogic",["lodash","stateManagement/popups/popups","stateManagement/leftBar/leftBar","stateManagement/siteDisplayName/siteDisplayName","stateManagement/dataFixers/dataFixers","stateManagement/store/dsPaths.json"],function(e,t,n,a,r,o){"use strict";var i=t.selectors.isPopUpMode;return{loadDocumentServices:function(t){return function(n,a,r){var i=e.pick(t,o.read),s=e.pick(t,o.write);e.assign(r,{dsRead:i,dsWrite:s})}},loadEditorAPI:function(t){return function(n,a,r){return e.assign(r,{editorAPI:t})}},onPreviewReady:function(){return function(e,t,o){var s=o.dsRead,u=t(),l=s.generalInfo.getMetaSiteId();e(n.logic.sendBIButtonsCount(i(u,s))),e(a.logic.fetchSiteDisplayName(l)),e(r.runDataFixers())}}}}),define("stateManagement/legacy/legacy",["stateManagement/legacy/legacyReducer","stateManagement/legacy/setStateAction","stateManagement/legacy/legacyLogic"],function(e,t,n){"use strict";return{reducer:e,setState:t,logic:n}}),define("stateManagement/panels/panels",["stateManagement/panels/panelsActions","stateManagement/panels/panelsLogic","stateManagement/panels/panelsReducer","stateManagement/panels/helpPropsReducer","stateManagement/panels/panelsSelectors"],function(e,t,n,a,r){"use strict";return{actions:e,logic:t,reducer:n,helpPropsReducer:a,selectors:r}}),define("stateManagement/topBar/topBarSelectors",["constants"],function(e){"use strict";var t=e.OVERRIDDEN;return{getOverriddenButtons:function(e){return e.topBar.overridden.buttons},getOverriddenMenus:function(e){return e.topBar.overridden.menus},getOverriddenMenuItems:function(e){return e.topBar.overridden.menuItems},getOverriddenQuickNavigation:function(e){return e.topBar.overridden[t.TOP_BAR.QUICK_NAVIGATION.KEY]}}}),define("stateManagement/topBar/topBar",["stateManagement/topBar/topBarReducer","stateManagement/topBar/topBarSelectors","stateManagement/topBar/topBarActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/mobile/mobileWizard/mobileWizardActions",["stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(e){"use strict";return{setTinyMenuAvailableSkins:function(t){return{type:e.SET_TINY_MENU_AVAILABLE_SKINS,availableSkins:t}},setTinyMenuStyleId:function(t){return{type:e.SET_TINY_MENU_STYLE_ID,styleId:t}},setCurrentStep:function(t){return{type:e.SET_CURRENT_STEP,currentStep:t}},setStepsToShow:function(t){return{type:e.SET_STEPS_TO_SHOW,stepsToShow:t}},setUserSelections:function(t,n){return{type:e.SET_USER_SELECTIONS,stepName:t,stepValue:n}},setLastSaved:function(t,n){return{type:e.SET_LAST_SAVED,stepName:t,value:n}},setAvailableQabPresets:function(t){return t.push({id:"NONE",structure:{}}),{type:e.SET_QAB_AVAILABLE_PRESETS,availablePresets:t}}}}),define("stateManagement/mobile/mobileWizard/mobileWizardSelectors",[],function(){"use strict";var e=function(e){return e.mobile.mobileWizard.userSelections};return{getIsMobileWizardEnabled:function(e){return e.mobile.mobileWizard.enabled},getIsMobileWizardExpanded:function(e){return e.mobile.mobileWizard.expanded},getCurrentStep:function(e){return e.mobile.mobileWizard.currentStep},getStepsToShow:function(e){return e.mobile.mobileWizard.stepsToShow},getUserSelections:e,getLastSaved:function(e,t){return e.mobile.mobileWizard.lastSaved[t]},tinyMenu:{getSelectedSkin:function(t){return e(t).tinyMenu},getAvailableSkins:function(e){return e.mobile.mobileWizard.tinyMenu.availableSkins},getStyleId:function(e){return e.mobile.mobileWizard.tinyMenu.styleId}},header:{getSelectedHeaderType:function(t){return e(t).header}},qab:{getAvailablePresets:function(e){return e.mobile.mobileWizard.qab.availablePresets},getSelectedQab:function(t){return e(t).qab}},backToTop:{getSelectedBackToTop:function(t){return e(t).backToTop}}}}),define("stateManagement/siteSegments/siteSegmentsActions",[],function(){"use strict";return{}}),define("stateManagement/components/componentsSelectors",["lodash","constants"],function(e,t){"use strict";var n=function(n,a){if(n&&(e.isArray(n)&&n.length||n.id)){var r=e.isUndefined(n.length)&&n.id?[n]:n;return r.length>1?t.MULTISELECT.TYPE:a.components.getType(e.head(r))}return null},a=function(e,t){var n=function(e){return e.length?e:[e]}(e);return t.components.getContainer(n[0])};return{getCompType:n,getCompTypeSuffix:function(e,t){var a=n(e,t);return a&&a.split(".").pop()},getContainer:a,isRepeaterItem:function(e,t){if(!e)return!1;var r=a(e,t);return"wysiwyg.viewer.components.Repeater"===n(r,t)}}}),define("stateManagement/components/componentsLogic",["lodash"],function(e){"use strict";var t=function(e,t){return function(n,a,r){r.editorAPI.components.layout.updateRelativeToStructure(e,t)}};return{updateRelativeToStructure:t,updateFixedPosition:function(n,a){return function(r,o,i){var s=i.dsRead,u=e.set(s.components.layout.getRelativeToStructure(n),"fixedPosition",a);r(t(n,u))}}}}),define("stateManagement/components/components",["stateManagement/components/componentsSelectors","stateManagement/components/componentsLogic"],function(e,t){"use strict";return{selectors:e,logic:t}}),define("stateManagement/siteSegments/siteSegmentsLogic",["lodash","stateManagement/components/components"],function(e,t){"use strict";var n={name:"ScrubAnimation"};return{setHeaderScrollBehavior:function(a,r,o,i){return function(s,u,l){var c=l.editorAPI,d=e.find(o,n);if(d&&c.components.behaviors.remove(r,d),a.behaviorName){var p=function(t,n,a,r){var o=n.id,i=e(t).pick(["name","type","params"]).assign({targetId:o,action:"scrollScrub",viewMode:r}).value();return a&&e.isArray(e.get(i,["params","animations"]))&&i.params.animations.push({name:a}),i}(c.behaviors.getDefinition(a.behaviorName),r,a.animationName,i);c.components.behaviors.update(r,p,p.action,p.viewMode)}s(t.logic.updateFixedPosition(r,!!a.fixedPosition))}}}}),define("stateManagement/siteSegments/siteSegmentsReducer",[],function(){"use strict";return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].type,e}}),define("stateManagement/siteSegments/siteSegmentsSelectors",[],function(){"use strict";return{}}),define("stateManagement/siteSegments/siteSegments",["stateManagement/siteSegments/siteSegmentsActions","stateManagement/siteSegments/siteSegmentsLogic","stateManagement/siteSegments/siteSegmentsReducer","stateManagement/siteSegments/siteSegmentsSelectors"],function(e,t,n,a){"use strict";return{actions:e,logic:t,reducer:n,selectors:a}}),define("stateManagement/mobile/mobileWizard/mobileWizardLogic",["lodash","util","coreUtilsLib","stateManagement/mobile/mobileWizard/mobileWizardActionTypes","stateManagement/mobile/mobileWizard/mobileWizardActions","stateManagement/mobile/mobileWizard/mobileWizardSelectors","stateManagement/siteSegments/siteSegments"],function(e,t,n,a,r,o,i){"use strict";var s=t.headerScrollTypes,u={id:"TINY_MENU",type:"MOBILE"},l={id:"SITE_HEADER",type:"MOBILE"},c={id:"QUICK_ACTION_BAR",type:"MOBILE"},d=["QuickActionBar_Preset1","QuickActionBar_Preset5"],p=["QuickActionBar_Preset5"],f={id:"BACK_TO_TOP_BUTTON",type:"MOBILE"},g=function(){return function(t,n,a){var o=a.editorAPI,i=e.get(o.addPanel.getSectionsByComponentType("wysiwyg.viewer.components.QuickActionBar")[0],"props.items"),s=e.filter(i,function(t){return e.includes(d,t.id)});t(r.setAvailableQabPresets(s))}},m=function(){return function(e,t,n){n.editorAPI.mobile.qab.isEnabled()||e(r.setLastSaved("qab","NONE"))}},E=function(e){return function(t,n,a){var r=a.editorAPI,o=r.documentServices.site,i=r.components.layout.get(l).height;if(o.setScroll(0,0),e){var s=function(e,t){return{action:"",duration:1.5,name:e,params:{compMeasures:{height:t},yoyo:!0,repeat:1}}}(e,i);r.components.behaviors.previewAnimation(l,s)}o.animateScroll(0,2*i,1.5,function(){return o.animateScroll(0,0,1.5)})}},S=function(t){return function(n,a){var i=a(),s=o.getStepsToShow(i),u=o.getCurrentStep(i),l=e.indexOf(s,u),c=s[l+t]||s[l];n(r.setCurrentStep(c))}},_=function(e,t){return function(n,a,r){r.editorAPI.documentServices.documentMode.setComponentPreviewState(e,t)}},P=function(){return function(e,n,r){var i=r.editorAPI;o.getIsMobileWizardEnabled(n())&&(e({type:a.SET_MOBILE_WIZARD_IS_EXPANDED,expanded:!1}),e({type:a.SET_MOBILE_WIZARD_IS_ENABLED,enabled:!1}),i.toolsControl.toggleHideTools(!1,!1),t.keyboardShortcuts.enable())}},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.noop;return function(e,a,r){var o=r.editorAPI,i=o.documentServices.site,s=o.site.getScroll().y,u=n.scrollUtils.calcScrollDuration(s,0,o.isMobileEditor());i.animateScroll(0,0,u,t)}},M=function(e){return e?"open":"close"};return{enableMobileWizard:function(){return function(e,n,r){var i=r.editorAPI;if(!o.getIsMobileWizardEnabled(n())){var s=function(){t.keyboardShortcuts.disable(),e({type:a.SET_MOBILE_WIZARD_IS_ENABLED,enabled:!0}),window.setTimeout(function(){i.toolsControl.toggleHideTools(!0,!1),e({type:a.SET_MOBILE_WIZARD_IS_EXPANDED,expanded:!0})},500)};i.preview.isInPreviewMode()?i.preview.togglePreview(function(){return s()}):s()}}},disableMobileWizard:P,scrollToTop:T,setNextStep:function(){return S(1)},setPreviousStep:function(){return S(-1)},skipWizard:function(){return function(e){e(P())}},setPreviewState:_,buildWizardSteps:function(){return function(t,n,a){var o=a.dsRead,i=a.editorAPI,s=e.some(o.pages.getPagesData(),function(e){return!e.isLandingPage}),u=i.isCurrentPageLandingPage(),l={MOBILE_WIZARD_FIRST_STEP:!0,TINY_MENU:s&&!u,SITE_HEADER:s&&!u,QUICK_ACTION_BAR:!0,BACK_TO_TOP_BUTTON:!0,MOBILE_WIZARD_LAST_STEP:!0},c=e.keys(e.pickBy(l));t(r.setStepsToShow(c)),t(r.setCurrentStep(c[0])),i.panelManager.closeAllPanels(),i.selection.deselectComponents(),i.documentServices.renderPlugins.allowSiteOverflow(!0)}},clearAfterMobileWizardCloses:function(){return function(e,t,n){n.editorAPI.documentServices.renderPlugins.allowSiteOverflow(!1)}},finishWizard:function(){return function(e){e(P())}},initTinyMenuStep:function(){return function(t,n){t(function(t,n,a){var i=a.dsRead,s=o.tinyMenu.getAvailableSkins(n());s.length||(s=i.theme.skins.getComponentSkins("wysiwyg.viewer.components.mobile.TinyMenu")),s=e.without(s,"wysiwyg.viewer.skins.mobile.TinyMenuSkin"),t(r.setTinyMenuAvailableSkins(s))}),t(function(e,t,n){var a=n.editorAPI.components.style.getId(u);e(r.setTinyMenuStyleId(a))}),t(function(e,t,n){var a=n.dsRead.components.skin.get(u);e(r.setLastSaved("tinyMenu",a))}),t(T(function(){"TINY_MENU"===o.getCurrentStep(n())&&t(_(u.id,"open"))}))}},enableHeaderRenderFlag:function(){return function(e,t,n){return n.editorAPI.documentMode.enableRenderFixedPositionContainers(!0)}},disableHeaderRenderFlag:function(){return function(e,t,n){return n.editorAPI.documentMode.enableRenderFixedPositionContainers(!1)}},getLastSavedHeaderType:function(){return function(t,n,a){var o=a.dsRead,i=o.components.layout.getRelativeToStructure(l),u=o.components.behaviors.get(l)||[],c=s.getSelectedHeaderType(i,u)||s.getDefaultHeaderType(),d=e.get(c,["value","scrollType"]);t(r.setLastSaved("header",d)),t(T(function(){var n=e.get(c,["value","animationName"]);t(E(n))}))}},animateHeaderScrollAnimation:E,setSelectedHeaderType:function(t){return function(n,a,o){var u=o.editorAPI,c=function(t,n){return e.find(t,function(t){return e.get(t,"value.scrollType")===n})}(s.headerScrollTypesModel,t),d=u.documentServices.components.behaviors.get(l)||[],p=e.get(c,["value","animationName"]);n(r.setUserSelections("header",t)),n(i.logic.setHeaderScrollBehavior(c.value,l,d,"MOBILE")),n(E(p))}},initQabStep:function(){return function(t,n){var a=n();t(g()),t(m()),e.includes(p,o.qab.getSelectedQab(a))&&t(_(c.id,"open"))}},getAvailableQabPresets:g,getQabSelectedValue:m,setQabSelectedPreset:function(t,n){return function(a,i,s){var u=s.editorAPI;a(_(c.id,void 0)),a(r.setUserSelections("qab",t.id));var l=i();"NONE"!==t.id?(u.mobile.qab.isEnabled()||u.mobile.actionBar.version.upgrade(),u.documentServices.waitForChangesApplied(function(){var r=o.qab.getAvailablePresets(l),i=e.find(r,{id:t.id}).structure,s=e.pick(u.components.layout.get(c),["x","y","width","height"]);u.components.layout.update(c,s,!0);var d=n.changeStyleHelper.getCompDefStyleId(i,u);u.components.style.setId(c,d);var f=n.changeStyleHelper.getCompDefStyle(i,u);u.components.style.update(c,f),e.includes(p,t.id)&&a(_(c.id,"open"))})):u.mobile.actionBar.version.revert()}},enableBackToTopButtonRenderFlag:function(){return function(e,t,n){return n.editorAPI.documentMode.enableBackToTopButton(!0)}},disableBackToTopButtonRenderFlag:function(){return function(e,t,n){return n.editorAPI.documentMode.enableBackToTopButton(!1)}},getLastSavedBackToTop:function(){return function(e,t,n){var a=n.editorAPI.mobile.mobileOnlyComponents.isMobileOnlyComponentExistOnStructure(f.id);e(r.setLastSaved("backToTop",a)),e(_(f.id,M(a)))}},setSelectedBackToTop:function(e){return function(t,n,a){var o=a.editorAPI;t(r.setUserSelections("backToTop",e?"true":"false")),o.mobile.mobileOnlyComponents.enableBackToTopButton(e),o.documentServices.waitForChangesApplied(function(){t(_(f.id,M(e)))})}}}}),define("stateManagement/mobile/mobileWizard/mobileWizard",["stateManagement/mobile/mobileWizard/mobileWizardLogic","stateManagement/mobile/mobileWizard/mobileWizardActions","stateManagement/mobile/mobileWizard/mobileWizardReducer","stateManagement/mobile/mobileWizard/mobileWizardSelectors"],function(e,t,n,a){"use strict";return{logic:e,actions:t,reducer:n,selectors:a}}),define("stateManagement/mobile/mobile",["stateManagement/mobile/mobileWizard/mobileWizard"],function(e){"use strict";return{mobileWizard:e}}),define("stateManagement/selection/selectionSelectors",["lodash","stateManagement/components/componentsSelectors"],function(e,t){"use strict";var n=function(e){return e.selection.selectedComponents};return{getSelectedCompsRefs:n,getSelectedComponentType:function(e,a){var r=n(e);return t.getCompTypeSuffix(r,a)},getSelectedCompRestrictions:function(t){return e.isEmpty(n(t))?{}:t.selection.compRestrictions}}}),define("stateManagement/selection/selectionActions",["stateManagement/selection/selectionActionTypes"],function(e){"use strict";var t=e.SELECT_COMPONENTS,n=e.ADD_TO_SELECTION,a=e.CLEAR_SELECTED_COMPONENTS,r=e.SET_SELECTED_COMPS_RESTRICTIONS;return{addToSelection:function(e){return{type:n,compRefs:e}},selectComponents:function(e){return{type:t,compRefs:e}},clearSelectedComponents:function(){return{type:a}},setSelectedCompsRestrictions:function(e){return{type:r,restrictions:e}}}}),define("stateManagement/highlights/highlightsActions",["stateManagement/highlights/highlightsActionTypes"],function(e){"use strict";var t=e.ADD_TO_HIGHLIGHTS,n=e.REMOVE_COMPS_FROM_HIGHLIGHTS,a=e.SET_HIGHLIGHTS,r=e.CLEAR_HIGHLIGHTS,o=e.REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE;return{addToHighlights:function(e){return{type:t,highlightsDefs:e}},removeCompsFromHighlights:function(e){return{type:n,compRefs:e}},removeFromHighlightsByHighlightType:function(e){return{type:o,highlightTypes:e}},setHighlights:function(e){return{type:a,highlightsDefs:e}},clearHighlights:function(){return{type:r}}}}),define("stateManagement/highlights/highlightsSelectors",[],function(){"use strict";return{getHighlights:function(e){return e.stage.highlights}}}),define("stateManagement/stage/stageSelectors",[],function(){"use strict";return{isPerformingMouseMoveAction:function(e){return e.performingMouseMoveAction}}}),define("stateManagement/highlights/logic/itemHighlightsHelper",["lodash","uiConstants"],function(e,t){"use strict";return{getItemHighlight:function(e,n,a){return{compRef:n,layout:e.components.layout.getRelativeToScreen(n),type:a?t.HIGHLIGHTS.TYPES.THICK_WITH_OPACITY:t.HIGHLIGHTS.TYPES.THICK}},getManageItemsPanelHighlight:function(e,t,n){return{compRef:t,layout:e.components.layout.getRelativeToScreen(t),type:n}}}}),define("stateManagement/highlights/highlightsLogic",["lodash","uiConstants","stateManagement/highlights/highlightsActions","stateManagement/highlights/highlightsSelectors","stateManagement/selection/selectionSelectors","stateManagement/stage/stageSelectors","stateManagement/highlights/logic/itemHighlightsHelper"],function(e,t,n,a,r,o,i){"use strict";return{handleSelectionHighlights:function(){return function(a,o,s){var u=s.dsRead,l=[],c=r.getSelectedCompsRefs(o()),d=e.head(c);if(a(n.removeFromHighlightsByHighlightType([t.HIGHLIGHTS.TYPES.THICK_WITH_OPACITY,t.HIGHLIGHTS.TYPES.THICK])),d){var p=function(t,n){var a=t.platform.controllers.connections.get(n);if(e.isArray(a)){var r=e.find(a,function(n){var a=n.controllerRef,r=n.role,o=t.platform.controllers.getStageData(a);return e.get(o,["connections",r,"relatedToRole"])});if(r){var o=r.controllerRef,i=r.role,s=t.platform.controllers.connections.getConnectedComponents(o),u=t.platform.controllers.getStageData(o).connections[i];return e.filter(s,function(n){return e.head(t.platform.controllers.connections.get(n)).role===u.relatedToRole})}}}(u,d);if(!e.isEmpty(p))return p.forEach(function(e){return l.push(i.getItemHighlight(u,e,!1))}),void a(n.addToHighlights(l));if("wysiwyg.viewer.components.Repeater"===u.components.getType(u.components.getContainer(d)))return l.push(i.getItemHighlight(u,d,!1)),void a(n.addToHighlights(l));var f=u.components.getAncestors(d),g=e.find(f,function(e){return"wysiwyg.viewer.components.Repeater"===u.components.getType(u.components.getContainer(e))});g&&(l.push(i.getItemHighlight(u,g,!0)),a(n.addToHighlights(l)))}}},handleRepeaterManageItemsHighlights:function(e,a){return function(r,o,s){var u=s.dsRead,l=[],c=a?t.HIGHLIGHTS.TYPES.OVERLAY_WITH_OPACITY:t.HIGHLIGHTS.TYPES.OVERLAY;r(n.removeFromHighlightsByHighlightType([c])),l.push(i.getManageItemsPanelHighlight(u,e,c)),r(n.addToHighlights(l))}},updateHighlights:function(){return function(t,r,i){var s=i.dsRead,u=r(),l=a.getHighlights(u);if(!e.isEmpty(l)&&!o.isPerformingMouseMoveAction(u)){var c=e.map(l,function(t){return e.defaults({layout:s.components.layout.getRelativeToScreen(t.compRef)},t)});t(n.setHighlights(c))}}}}}),define("stateManagement/selection/selectionLogic",["lodash","stateManagement/selection/selectionSelectors","stateManagement/selection/selectionActions","stateManagement/highlights/highlightsLogic"],function(e,t,n,a){"use strict";return{selectComponents:function(r,o){return function(i,s){var u=t.getSelectedCompsRefs(s());e.isEqual(u,r)||(i(n.selectComponents(r)),i(a.handleSelectionHighlights()),i(n.setSelectedCompsRestrictions(o)))}}}}),define("stateManagement/selection/selection",["stateManagement/selection/selectionReducer","stateManagement/selection/selectionSelectors","stateManagement/selection/selectionActions","stateManagement/selection/selectionLogic"],function(e,t,n,a){"use strict";return{reducer:e,selectors:t,actions:n,logic:a}}),define("stateManagement/userProfile/userProfileSelectors",[],function(){"use strict";return{getUserProfile:function(e){return e.userProfile}}}),define("stateManagement/userProfile/userProfileActions",["stateManagement/userProfile/userProfileActionTypes"],function(e){"use strict";var t=e.SET_USER_PROFILE;return{setUserProfile:function(e){return{type:t,userProfile:e}}}}),define("stateManagement/userProfile/userProfile",["stateManagement/userProfile/userProfileReducer","stateManagement/userProfile/userProfileSelectors","stateManagement/userProfile/userProfileActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/domain/domainSelectors",["lodash","util"],function(e,t){"use strict";var n=function(e){return e.generalInfo.urlFormat.isSlash()?"wixsite.com":"wix.com"},a=function(e,t){return t.generalInfo.isHttpsEnabled()?"https":"http"};return{getSiteProtocol:a,isDomainConnected:function(t,a){var r=a.generalInfo.getPublicUrl();return!e.isNil(r)&&!e.includes(r,n(a))},getFreeDomainPrefix:function(e,t){return a(0,t)+"://"+t.generalInfo.getUserInfo().name+"."+n(t)+"/"},doesUserOwnGoogleDomain:function(){var e=t.cookie.getCookie("wixClient");return e.indexOf("GOOGLE_DOMAIN")>0||e.indexOf("REGRU")>0}}}),define("stateManagement/domain/domain",["stateManagement/domain/domainSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/highlights/highlights",["stateManagement/highlights/highlightsLogic","stateManagement/highlights/highlightsReducer","stateManagement/highlights/highlightsSelectors","stateManagement/highlights/highlightsActions"],function(e,t,n,a){"use strict";return{logic:e,reducer:t,selectors:n,actions:a}}),define("stateManagement/tpa/tpaActions",["lodash","stateManagement/tpa/tpaActionTypes"],function(e,t){"use strict";var n=t.ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,a=t.SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE;return{addAppIdsToRefreshOnDashboardClose:function(e){return{type:n,appIds:e}},setAppIdsToRefreshOnDashboardClose:function(e){return{type:a,appIds:e}}}}),define("stateManagement/tpa/tpaLogic",["lodash","stateManagement/tpa/tpaActions"],function(e,t){"use strict";var n=function(t){return e.map(t,a)},a=function(e){return parseInt(e,10)},r=function(t,n){return e(t).map(n.tpa.app.getDataByAppDefId).map("applicationId").compact().value()};return{addAppDefIdsToRefreshOnDashboardClose:function(e){return function(a,o,i){var s=i.dsRead,u=r(e,s);a(t.addAppIdsToRefreshOnDashboardClose(n(u)))}},setAppDefIdsToRefreshOnDashboardClose:function(e){return function(a,o,i){var s=i.dsRead,u=r(e,s);a(t.setAppIdsToRefreshOnDashboardClose(n(u)))}}}}),define("stateManagement/tpa/tpaSelectors",["lodash"],function(e){"use strict";return{getAppIdsToRefreshAfterDashboardClose:function(t){return e.map(e.keys(t.tpa.appsIdsToRefreshOnDashboardClose),function(e){return parseInt(e,10)})}}}),define("stateManagement/tpa/tpa",["stateManagement/tpa/tpaLogic","stateManagement/tpa/tpaSelectors"],function(e,t){"use strict";return{logic:e,selectors:t}}),define("stateManagement/stage/stage",["stateManagement/stage/stageSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/uploadedFonts/logic/fontsUploader",["lodash","util"],function(e,t){"use strict";return{upload:function(n,a,r){if(a){var o=e.map(r,function(e){return{uploadFn:a.item.upload,source:{file:e,name:e.name,size:e.size,folderId:null,folderName:"All Media",mediaType:t.fontsManagerUtils.constants.FONTS_MEDIA_TYPE}}});n.Uploader.upload(o)}},clearUploadQueue:function(e){e.Uploader.uploadIsInProgress||e.Uploader.clearQueue()},getUploadQueue:function(e){return e.Uploader.uploadQueue},cancelUpload:function(e){var t=!1;if(e.canAbort())try{e.abort(),t=!0}catch(e){t=!1}return t},retryUpload:function(t){!e.isEmpty(t.Uploader.uploadQueue)&t.Uploader.uploadIsInProgress&&t.Uploader.upload()}}}),define("stateManagement/uploadedFonts/logic/uploadedFontsLogicUtils",["lodash","util","coreUtilsLib"],function(e,t,n){"use strict";var a=function(t){return e.map(t,function(t){return e.assign(t,{name:t.source.name})})},r=function(n){return e.map(n,function(n){if(n.status===t.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){var a=e.get(n,"serverResponse.data");return e.assign({},n,t.fontsManagerUtils.getUploadedFontData(a))}return n})};return{getFontObject:function(n){return n=e.reject(n,function(e){return!e.fileInput}),e.map(n,function(e){return t.fontsManagerUtils.getUploadedFontData(e)})},buildUploadedItems:function(n){return e.transform(n,function(e,n){n.status===t.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED&&(e[n.id]={finished:!0})},{})},buildQueueItemForStore:function(t){var a=e.pick(t,["canceled","cssFontFamily","displayName","downloadUrl","error_code","fileUrl","fontFace","fontFamily","id","isAborted","name","removed","status","stillUploading"]);return a.source=n.objectUtils.cloneDeep(t.source),a.fileInput=n.objectUtils.cloneDeep(t.fileInput),a.fileOutput=n.objectUtils.cloneDeep(t.fileOutput),a.serverResponse=n.objectUtils.cloneDeep(t.serverResponse),a},getInitialQueueWithData:function(t){return e.flow([a,r])(t)},getNewQueueData:a}}),define("stateManagement/uploadedFonts/uploadedFontsActions",["stateManagement/uploadedFonts/uploadedFontsActionTypes"],function(e){"use strict";var t=e.SET_LIST,n=e.SET_QUEUE,a=e.SET_FLAG_TO_QUEUE_ITEM,r=e.SET_UPLOADED_ITEMS,o=e.ADD_TIME_OUT_TOKEN,i=e.CLEAR_TIME_OUT_TOKENS;return{setList:function(e){return{type:t,list:e}},setQueue:function(e){return{type:n,queue:e}},setFlagToQueueItem:function(e,t){return{type:a,queueItemIndex:e,flag:t}},setUploadedItems:function(e){return{type:r,uploadedItems:e}},addTimeOutToken:function(e){return{type:o,timeOutToken:e}},clearTimeOutTokens:function(){return{type:i}}}}),define("stateManagement/uploadedFonts/uploadedFontsSelectors",[],function(){"use strict";return{getList:function(e){return e.uploadedFonts.list},getQueue:function(e){return e.uploadedFonts.queue},getUploadedItems:function(e){return e.uploadedFonts.uploadedItems},getTimeOutTokens:function(e){return e.uploadedFonts.timeOutTokens}}}),define("stateManagement/uploadedFonts/logic/uploadedFontsLogic",["lodash","wixmp","coreBi","util","coreUtilsLib","stateManagement/bi/bi","stateManagement/uploadedFonts/logic/fontsUploader","stateManagement/uploadedFonts/logic/uploadedFontsLogicUtils","stateManagement/uploadedFonts/uploadedFontsActions","stateManagement/uploadedFonts/uploadedFontsSelectors"],function(e,t,n,a,r,o,i,s,u,l){"use strict";var c=l.getQueue,d=l.getUploadedItems,p=l.getTimeOutTokens,f=u.setList,g=u.setQueue,m=u.setFlagToQueueItem,E=u.setUploadedItems,S=u.addTimeOutToken,_=u.clearTimeOutTokens,P=a.fontsManagerUtils.constants,T=function(e,t){var n={mediaType:P.FONTS_MEDIA_TYPE};return n.paging={cursor:null,size:500},t.wixmpSource.items.list(null,n).then(function(t){var n=r.objectUtils.cloneDeep(t.data);e(f(s.getFontObject(n)))})},M=function(t,n){return function(a,r,o){var i=o.wixmpFonts;n.id&&e.assign(i.uploadQueue[t],{id:n.id}),a(m(t,n))}},A=function(){return function(n,a){var r=s.getInitialQueueWithData(e.map(i.getUploadQueue(t),s.buildQueueItemForStore)),o=s.buildUploadedItems(d(a()));n(g(r)),n(E(o)),O(n,a)}},O=function(t,n){var a=p(n());e.forEach(a,function(e){window.clearTimeout(e)}),t(_())},v=function(n,a){t.events.on(t.events.ITEMS.REMOVE,function(t){e.forEach(t,function(e){e.then(function(){return T(n,a)}).catch(function(e){r.log.error(e)})})})},h=function(n,r,o){t.Uploader.on("fileStatusChanged",function(t){t.currentFileProgress.status===P.FONT_STATUS.SUCCEEDED&&T(n,o);var i=c(r()),s={},u=t.currentFileQueueIdx,l=t.currentFileProgress.status;switch(s.status=l,l){case a.fontsManagerUtils.constants.FONT_STATUS.PROCESSING:I(n,i,u);break;case a.fontsManagerUtils.constants.FONT_STATUS.FAILED:var d=y(t,i,u);e.assign(s,d);break;case a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED:var p=N(n,r,t,i,u);e.assign(s,p)}n(M(u,s))})},I=function(e,t,a){e(o.event(n.events.fontsUploadPanel.Start_Font_Upload_Process,{name:t[a].name}));var r=window.setTimeout(function(){e(M(a,{stillUploading:!0}))},3e4);e(S(r))},y=function(t,n,a){var o=e.get(t,"currentFileProgress.file.serverResponse.data"),i=e.get(o,"error_code")||"unknown";if(!n[a].canceled){var s=r.objectUtils.cloneDeep(n[a]);s.error_code=i,L(i,s)}return{error_code:i}},N=function(t,r,i,s,u){o.event(n.events.fontsUploadPanel.Fonts_Uploaded,{name:s[u].name});var l=e.get(i,"currentFileProgress.file.serverResponse.data"),c=_defineProperty({},l.id,!0),p=e.assign(_defineProperty({},l.id,{finished:!1}),d(r()),c);return t(E(p)),a.fontsManagerUtils.getUploadedFontData(l)},R=function(n,a,r){t.Uploader.on("queueChanged",function(t){r.uploadQueue=t;var o=c(a()),i=s.getNewQueueData(e.map(t,s.buildQueueItemForStore)),u=e.map(i,function(t,n){return e.defaults({},o[n],t)});n(g(u))})},b=function(){t.Uploader.on("uploadQueueFinished",function(){i.clearUploadQueue(t)})},L=function(e,t){var r=a.fontsManagerUtils.getErrorMessage(e).bi_msg;o.event(n.events.fontsUploadPanel.Upload_Failed,{message:r,name:t.name})};return{init:function(){return function(e,t,n){var a=n.wixmpFonts;T(e,a),e(A()),h(e,t,a),R(e,t,a),v(e,a),b()}},removeFonts:function(e){return function(t,n,a){a.wixmpFonts.wixmpSource.items.remove(e)}},assignFlagToQueueItem:M,cancelUpload:function(e){return function(t,n,a){var r=a.wixmpFonts;-1!==e&&i.cancelUpload(r.uploadQueue[e])&&t(M(e,{canceled:!0}))}},prepareUploadedFontsData:A,uploadItems:function(e){return function(n,a,r){var o=r.wixmpFonts;i.upload(t,o.wixmpSource,e)}},clearUploadQueue:function(){i.clearUploadQueue(t)}}}),define("stateManagement/uploadedFonts/uploadedFonts",["stateManagement/uploadedFonts/logic/uploadedFontsLogic","stateManagement/uploadedFonts/uploadedFontsReducer","stateManagement/uploadedFonts/uploadedFontsSelectors","stateManagement/uploadedFonts/uploadedFontsActions"],function(e,t,n,a){"use strict";return{logic:e,reducer:t,selectors:n,actions:a}}),define("stateManagement/componentMetaData/componentMetaData",["lodash","constants","experiment"],function(e,t,n){"use strict";var a=e.curryRight(e.every),r=function(t){return function(n,a){return!e.isEmpty(n)&&e.every(n,function(e){return t(e,a)})}},o=function(t){return!e.isUndefined(t.docked)&&t.fixedPosition},i=function(e,t){var n=t.components.layout.get(e);return n.docked=t.components.layout.getDock(e),o(n)};return{isHorizontallyMovable:r(function(e,t){return n.isOpen("layoutTractor")?t.components.is.horizontallyMovable(e)&&!i(e,t)&&!t.components.layout.isHorizontallyStretched(e):t.components.is.horizontallyMovable(e)&&!i(e,t)&&!t.components.layout.isHorizontallyStretchedToScreen(e)}),isPinnedBySerializedLayout:a(o),isPinned:r(i),isPlatformShowFocusBox:function(t,n){var a=n.platform.controllers.connections.get(t);if(!e.isEmpty(a))return e(a).map(function(t){return function(t,n){var a=n.controllerRef,r=n.role,o=t.platform.controllers.getStageData(a);return e.get(o,["connections",r,"showFocusBox"])}(n,t)}).find(e.isBoolean)},getPlatformFocusBoxNavType:function(){return t.UI.NAVIGATION_TYPES.TABS},getPlatformFocusBoxNavContent:function(e,t,n){return{tabs:[{id:"platform-tab",label:n,active:!0}],onTabClick:function(){return t.selection.selectComponentByCompRef(e)},translate:!1}}}}),define("stateManagement/applyModeFromClipboard/applyModeFromClipboardSelectors",[],function(){"use strict";return{selectApplyModeFromClipboardSuggestion:function(e){return e.applyModeFromClipboardSuggestion}}}),define("stateManagement/applyModeFromClipboard/applyModeFromClipboard",["stateManagement/applyModeFromClipboard/applyModeFromClipboardSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/pinMode/pinModeActions",["stateManagement/pinMode/pinModeActionTypes"],function(e){"use strict";return{openPinMode:function(){return{type:e.OPEN_PIN_MODE}},closePinMode:function(){return{type:e.CLOSE_PIN_MODE}},showPinPreviewRect:function(t){return{type:e.SHOW_PIN_PREVIEW_RECT,style:t}},hidePinPreviewRect:function(){return{type:e.HIDE_COMPONENT_PREVIEW_RECT}}}}),define("stateManagement/pinMode/pinModeSelectors",[],function(){"use strict";return{isOpen:function(e){return e.pinMode.isOpen},getPinnedCompType:function(e){return e.pinMode.pinnedCompType},getPinPreviewRectStyle:function(e){return e.pinMode.pinPreviewRectStyle}}}),define("stateManagement/pinMode/pinModeLogic",["lodash","constants","stateManagement/panels/panelsLogic","stateManagement/pinMode/pinModeActions","stateManagement/pinMode/pinModeSelectors","stateManagement/selection/selectionSelectors"],function(e,t,n,a,r,o){"use strict";var i={default:"compPanels.dynamicPanels.pinnedDockPanel",PopupContainer:t.COMP_PANELS.POPUP.CONTAINER.POPUP_GRID_LAYOUT_PANEL.NAME},s=t.EDITOR_API.BLOCKING_LAYER_STYLE,u=function(e){return i[e]||i.default};return{open:function(r,i){return function(l,c,d){var p=d.dsRead,f=d.tooltipManager,g=c(),m=o.getSelectedComponentType(g,p),E="WRichText"===m?["LEFT","MIDDLE","RIGHT"]:["MIDDLE"];f.hide(t.ROOT_COMPS.TOOLTIPS.FIRST_TIME_EXIT_POPUP_MODE);var S=e.assign({origin:r,selectedComponents:o.getSelectedCompsRefs(g),disabledValues:E},i);l(n.openComponentPanel(u(m),S)),l(function(t,n,a){var r=a.dsWrite,i=n();r.renderPlugins.setCompsToShowOnTop(e.map(o.getSelectedCompsRefs(i),"id")),r.renderPlugins.setBlockingLayer(s)}),l(a.openPinMode())}},close:function(){return function(e,t){var o=t();if(r.isOpen(o)){var i=r.getPinnedCompType(o);e(n.closePanelByName(u(i))),e(a.hidePinPreviewRect()),e(function(e,t,n){var a=n.dsWrite;a.renderPlugins.setCompsToShowOnTop(null),a.renderPlugins.setBlockingLayer(null)}),e(a.closePinMode())}}}}}),define("stateManagement/pinMode/pinMode",["stateManagement/pinMode/pinModeActions","stateManagement/pinMode/pinModeLogic","stateManagement/pinMode/pinModeReducer","stateManagement/pinMode/pinModeSelectors"],function(e,t,n,a){"use strict";return{actions:e,logic:t,reducer:n,selectors:a}}),define("stateManagement/contextMenu/contextMenuActions",["stateManagement/contextMenu/contextMenuActionTypes"],function(e){"use strict";return{openContextMenu:function(t){var n=t.editorPositionX,a=t.editorPositionY,r=t.viewerPositionX,o=t.viewerPositionY;return{type:e.OPEN_CONTEXT_MENU,editorPositionX:n,editorPositionY:a,viewerPositionX:r,viewerPositionY:o}}}}),define("stateManagement/contextMenu/contextMenuSelectors",[],function(){"use strict";var e=function(e){return e.pinMode.pinnedCompType};return{isOpen:function(t){return Boolean(e(t))},getPinnedCompType:e}}),define("stateManagement/contextMenu/contextMenu",["stateManagement/contextMenu/contextMenuActions","stateManagement/contextMenu/contextMenuReducer","stateManagement/contextMenu/contextMenuSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/multilingual/multilingualActions",["stateManagement/multilingual/multilingualActionTypes"],function(e){"use strict";var t=e.LOAD_LANGUAGES,n=e.LOAD_LANGUAGES_SUCCESS,a=e.LOAD_LANGUAGES_ERROR,r=e.LOAD_SUPPORTED_LANGUAGES,o=e.LOAD_SUPPORTED_LANGUAGES_SUCCESS,i=e.LOAD_SUPPORTED_LANGUAGES_ERROR,s=e.CHECK_LANGUAGE_STATUS,u=e.CHECK_LANGUAGE_STATUS_SUCCESS,l=e.CHECK_LANGUAGE_STATUS_ERROR;return{loadLanguages:function(e){return{type:t,instanceId:e}},loadLanguagesSuccess:function(e){return{type:n,payload:e}},loadLanguagesError:function(e){return{type:a,error:e}},loadSupportedLanguages:function(){return{type:r}},loadSupportedLanguagesSuccess:function(e){return{type:o,payload:e}},loadSupportedLanguagesError:function(e){return{type:i,error:e}},checkLanguageStatus:function(){return{type:s}},checkLanguageStatusSuccess:function(e){return{type:u,payload:e}},checkLanguageStatusError:function(e){return{type:l,error:e}}}}),define("stateManagement/multilingual/multilingualLogic",["lodash","zepto","util","stateManagement/multilingual/multilingualActions"],function(e,t,n,a){"use strict";var r=n.serviceTopology.linguistUrl,o=function(n,a,o){return function(n){return new Promise(function(a,r){return t.ajax(e.assign({},n,{success:a,error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t)}}))})}({url:r+n}).then(a).catch(o)};return{loadLanguages:function(e){return function(t){return t(a.loadLanguages(e)),o("/languages/?instance-id="+e,a.loadLanguagesSuccess,a.loadLanguagesError).then(t)}},loadSupportedLanguages:function(){return function(e){return e(a.loadLanguages()),o("/languages/supported",a.loadSupportedLanguagesSuccess,a.loadSupportedLanguagesError).then(e)}},getMultilingualStatus:function(e){return function(t){return t(a.checkLanguageStatus(e)),new Promise(function(e){setTimeout(function(){e(!1)},0)}).then(a.checkLanguageStatusSuccess).catch(a.checkLanguageStatusError).then(t)}}}}),define("stateManagement/multilingual/multilingual",["stateManagement/multilingual/multilingualActions","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualReducer","stateManagement/multilingual/multilingualLogic","stateManagement/multilingual/multilingualDataConverters"],function(e,t,n,a,r){"use strict";return{actions:e,actionTypes:t,reducer:n,logic:a,dataConverters:r}}),define("stateManagement",["stateManagement/applicationStudio/applicationStudio","stateManagement/addPanel/addPanel","stateManagement/store/createEditorStore","stateManagement/store/throttledStore","stateManagement/legacy/legacy","stateManagement/panels/panels","stateManagement/leftBar/leftBar","stateManagement/topBar/topBar","stateManagement/mobile/mobile","stateManagement/siteSegments/siteSegments","stateManagement/selection/selection","stateManagement/userProfile/userProfile","stateManagement/domain/domain","stateManagement/highlights/highlights","stateManagement/tpa/tpa","stateManagement/stage/stage","stateManagement/uploadedFonts/uploadedFonts","stateManagement/componentMetaData/componentMetaData","stateManagement/applyModeFromClipboard/applyModeFromClipboard","stateManagement/bi/bi","stateManagement/pinMode/pinMode","stateManagement/easterEggs/easterEggs","stateManagement/contextMenu/contextMenu","stateManagement/components/components","stateManagement/store/combineReducers","stateManagement/dataFixers/dataFixers","stateManagement/userPreferences/userPreferences","stateManagement/siteDisplayName/siteDisplayName","stateManagement/multilingual/multilingual"],function(e,t,n,a,r,o,i,s,u,l,c,d,p,f,g,m,E,S,_,P,T,M,A,O,v,h,I,y,N){"use strict";return{applicationStudio:e,addPanel:t,createEditorStore:n,throttledStore:a,legacy:r,panels:o,leftBar:i,topBar:s,mobile:u,siteSegments:l,selection:c,userProfile:d,domain:p,highlights:f,tpa:g,stage:m,uploadedFonts:E,componentMetaData:S,applyModeFromClipboard:_,bi:P,pinMode:T,easterEggs:M,contextMenu:A,components:O,combineReducers:v,dataFixers:h,userPreferences:I,siteDisplayName:y,multilingual:N}});
//# sourceMappingURL=stateManagement.min.js.map